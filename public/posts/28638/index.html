<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Solutions to exercises and projects in the textbook C Programming: A Modern Approach, 2nd Edition | Czq's Blog</title><meta name="author" content="Paul Chen"><meta name="copyright" content="Paul Chen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Chapter 2Answers to Selected Exercises2. [was #2] (a) The program contains one directive (#include) and four statements (three calls of printf and one return). (b)  123Parkinson's Law:Work expands so"><meta property="og:type" content="article"><meta property="og:title" content="Solutions to exercises and projects in the textbook C Programming: A Modern Approach, 2nd Edition"><meta property="og:url" content="https://czqu.net/posts/28638/index.html"><meta property="og:site_name" content="Czq's Blog"><meta property="og:description" content="Chapter 2Answers to Selected Exercises2. [was #2] (a) The program contains one directive (#include) and four statements (three calls of printf and one return). (b)  123Parkinson's Law:Work expands so"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://czqu.net/img/Doraemon.png"><meta property="article:published_time" content="2020-11-13T12:46:33.000Z"><meta property="article:modified_time" content="2020-11-13T12:46:33.000Z"><meta property="article:author" content="Paul Chen"><meta property="article:tag" content="C"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://czqu.net/img/Doraemon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Solutions to exercises and projects in the textbook C Programming: A Modern Approach, 2nd Edition",
  "url": "https://czqu.net/posts/28638/",
  "image": "https://czqu.net/img/Doraemon.png",
  "datePublished": "2020-11-13T12:46:33.000Z",
  "dateModified": "2020-11-13T12:46:33.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Paul Chen",
      "url": "https://czqu.net"
    }
  ]
}</script><link rel="shortcut icon" href="/img/Doraemon.png"><link rel="canonical" href="https://czqu.net/posts/28638/index.html"><link rel="preconnect"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media=&quot;all&quot;"><script>(() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-H9BD1N5K2S"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-H9BD1N5K2S')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-H9BD1N5K2S', {'page_path': window.location.pathname})
}, 'google_analytics')</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"No results found for: ${query}","hits_stats":"${hits} articles found"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":2000,"languages":{"author":"Author: Paul Chen","link":"Link: ","source":"Source: Czq's Blog","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Solutions to exercises and projects in the textbook C Programming: A Modern Approach, 2nd Edition",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2253275085764952" crossorigin="anonymous"></script><meta name="generator" content="Hexo 7.3.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="Czq's Blog" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="Czq's Blog" type="application/rss+xml"><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      if ($loadingBox.classList.contains('loaded')) return
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()

  if (document.readyState === 'complete') {
    preloader.endLoading()
  } else {
    window.addEventListener('load', preloader.endLoading)
    document.addEventListener('DOMContentLoaded', preloader.endLoading)
    // Add timeout protection: force end after 7 seconds
    setTimeout(preloader.endLoading, 7000)
  }

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/Doraemon.png" onerror="this.onerror=null,this.src=&quot;/img/friend_404.gif&quot;" alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook/"><i class="fa-fw fas fa-comment-dots"></i><span> Guestbook</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://today.czqu.net/pic/today.webp)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Czq's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Solutions to exercises and projects in the textbook C Programming: A Modern Approach, 2nd Edition</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span> Back to Home</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook/"><i class="fa-fw fas fa-comment-dots"></i><span> Guestbook</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Solutions to exercises and projects in the textbook C Programming: A Modern Approach, 2nd Edition</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-11-13T12:46:33.000Z" title="Created 2020-11-13 12:46:33">2020-11-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-11-13T12:46:33.000Z" title="Updated 2020-11-13 12:46:33">2020-11-13</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">11.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>73mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:500,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2020-11-13 12:46:33&quot;}" hidden=""></div><h3 id="Chapter-2"><a href="#Chapter-2" class="headerlink" title="Chapter 2"></a>Chapter 2</h3><h4 id="Answers-to-Selected-Exercises"><a href="#Answers-to-Selected-Exercises" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2] (a) The program contains one directive (<code>#include</code>) and four statements (three calls of <code>printf</code> and one <code>return</code>).</p><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Parkinson's Law:</span><br><span class="line">Work expands so as to fill the time</span><br><span class="line">available for its completion.</span><br></pre></td></tr></tbody></table></figure><p><strong>3.</strong> [was #4]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int height = 8, length = 12, width = 10, volume;</span><br><span class="line"> </span><br><span class="line">  volume = height * length * width;</span><br><span class="line"> </span><br><span class="line">  printf("Dimensions: %dx%dx%d\n", length, width, height);</span><br><span class="line">  printf("Volume (cubic inches): %d\n", volume);</span><br><span class="line">  printf("Dimensional weight (pounds): %d\n", (volume + 165) / 166);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>4.</strong> [was #6] Here’s one possible program:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int i, j, k;</span><br><span class="line">  float x, y, z;</span><br><span class="line"> </span><br><span class="line">  printf("Value of i: %d\n", i);</span><br><span class="line">  printf("Value of j: %d\n", j);</span><br><span class="line">  printf("Value of k: %d\n", k);</span><br><span class="line"> </span><br><span class="line">  printf("Value of x: %g\n", x);</span><br><span class="line">  printf("Value of y: %g\n", y);</span><br><span class="line">  printf("Value of z: %g\n", z);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>When compiled using GCC and then executed, this program produced the following output:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Value of i: 5618848</span><br><span class="line">Value of j: 0</span><br><span class="line">Value of k: 6844404</span><br><span class="line">Value of x: 3.98979e-34</span><br><span class="line">Value of y: 9.59105e-39</span><br><span class="line">Value of z: 9.59105e-39</span><br></pre></td></tr></tbody></table></figure><p>The values printed depend on many factors, so the chance that you’ll get exactly these numbers is small.</p><p><strong>5.</strong> [was #10] (a) is not legal because <code>100_bottles</code> begins with a digit.</p><p><strong>8.</strong> [was #12] There are 14 tokens: <code>a</code>, <code>=</code>, <code>(</code>, <code>3</code>, <code>*</code>, <code>q</code>, <code>-</code>, <code>p</code>, <code>*</code>, <code>p</code>, <code>)</code>, <code>/</code>, <code>3</code>, and <code>;</code>.</p><h4 id="Answers-to-Selected-Programming-Projects"><a href="#Answers-to-Selected-Programming-Projects" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>4.</strong> [was #8; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  float original_amount, amount_with_tax;</span><br><span class="line"> </span><br><span class="line">  printf("Enter an amount: ");</span><br><span class="line">  scanf("%f", &amp;original_amount);</span><br><span class="line">  amount_with_tax = original_amount * 1.05f;</span><br><span class="line">  printf("With tax added: $%.2f\n", amount_with_tax);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>The <code>amount_with_tax</code> variable is unnecessary. If we remove it, the program is slightly shorter:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  float original_amount;</span><br><span class="line"> </span><br><span class="line">  printf("Enter an amount: ");</span><br><span class="line">  scanf("%f", &amp;original_amount);</span><br><span class="line">  printf("With tax added: $%.2f\n", original_amount * 1.05f);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>Chapter 3</strong></p><p><strong>Answers to Selected Exercises</strong></p><p><strong>2.</strong> [was #2]</p><p>(a) printf(“%-8.1e”, x);<br>(b) printf(“%10.6e”, x);<br>(c) printf(“%-8.3f”, x);<br>(d) printf(“%6.0f”, x);</p><p><strong>5.</strong> [was #8] The values of x, i, and y will be 12.3, 45, and .6, respectively.</p><p><strong>Answers to Selected Programming Projects</strong></p><p><strong>1.</strong> [was #4; modified]</p><p>#include &lt;stdio.h&gt;</p><p>int main(void)</p><p>{</p><p>int month, day, year;</p><p>printf(“Enter a date (mm/dd/yyyy): “);</p><p>scanf(“%d/%d/%d”, &amp;month, &amp;day, &amp;year);</p><p>printf(“You entered the date %d%.2d%.2d\n”, year, month, day);</p><p>return 0;</p><p>}</p><p><strong>3.</strong> [was #6; modified]</p><p>#include &lt;stdio.h&gt;</p><p>int main(void)</p><p>{</p><p>int prefix, group, publisher, item, check_digit;</p><p>printf(“Enter ISBN: “);</p><p>scanf(“%d-%d-%d-%d-%d”, &amp;prefix, &amp;group, &amp;publisher, &amp;item, &amp;check_digit);</p><p>printf(“GS1 prefix: %d\n”, prefix);</p><p>printf(“Group identifier: %d\n”, group);</p><p>printf(“Publisher code: %d\n”, publisher);</p><p>printf(“Item number: %d\n”, item);</p><p>printf(“Check digit: %d\n”, check_digit);</p><p>/* The five printf calls can be combined as follows:</p><p>printf(“GS1 prefix: %d\nGroup identifier: %d\nPublisher code: %d\nItem number: %d\nCheck digit: %d\n”,</p><p>​ prefix, group, publisher, item, check_digit);</p><p>*/</p><p>return 0;</p><p>}</p><p><strong>Chapter 4</strong></p><p><strong>Answers to Selected Exercises</strong></p><p><strong>2.</strong> [was #2] Not in C89. Suppose that i is 9 and j is 7. The value of (-i)/j could be either –1 or –2, depending on the implementation. On the other hand, the value of -(i/j) is always –1, regardless of the implementation. In C99, on the other hand, the value of (-i)/j must be equal to the value of -(i/j).</p><p><strong>9.</strong> [was #6]</p><p>(a) 63 8<br>(b) 3 2 1<br>(c) 2 -1 3<br>(d) 0 0 0</p><p><strong>13.</strong> [was #8] The expression ++i is equivalent to (i += 1). The value of both expressions is i <em>after</em> the increment has been performed.</p><p><strong>Answers to Selected Programming Projects</strong></p><p><strong>2.</strong> [was #4]</p><p>#include &lt;stdio.h&gt;</p><p>int main(void)</p><p>{</p><p>int n;</p><p>printf(“Enter a three-digit number: “);</p><p>scanf(“%d”, &amp;n);</p><p>printf(“The reversal is: %d%d%d\n”, n % 10, (n / 10) % 10, n / 100);</p><p>return 0;</p><p>}</p><p><strong>Chapter 5</strong></p><p><strong>Answers to Selected Exercises</strong></p><p><strong>2.</strong> [was #2]</p><p>(a) 1<br>(b) 1<br>(c) 1<br>(d) 1</p><p><strong>4.</strong> [was #4] (i &gt; j) - (i &lt; j)</p><p><strong>6.</strong> [was #12] Yes, the statement is legal. When n is equal to 5, it does nothing, since 5 is not equal to –9.</p><p><strong>10.</strong> [was #16] The output is</p><p>onetwo</p><p>since there are no break statements after the cases.</p><p><strong>Answers to Selected Programming Projects</strong></p><p><strong>2.</strong> [was #6]</p><p>#include &lt;stdio.h&gt;</p><p>int main(void)</p><p>{</p><p>int hours, minutes;</p><p>printf(“Enter a 24-hour time: “);</p><p>scanf(“%d:%d”, &amp;hours, &amp;minutes);</p><p>printf(“Equivalent 12-hour time: “);</p><p>if (hours == 0)</p><p>printf(“12:%.2d AM\n”, minutes);</p><p>else if (hours &lt; 12)</p><p>printf(“%d:%.2d AM\n”, hours, minutes);</p><p>else if (hours == 12)</p><p>printf(“%d:%.2d PM\n”, hours, minutes);</p><p>else</p><p>printf(“%d:%.2d PM\n”, hours - 12, minutes);</p><p>return 0;</p><p>}</p><p><strong>4.</strong> [was #8; modified]</p><p>#include &lt;stdio.h&gt;</p><p>int main(void)</p><p>{</p><p>int speed;</p><p>printf(“Enter a wind speed in knots: “);</p><p>scanf(“%d”, &amp;speed);</p><p>if (speed &lt; 1)</p><p>printf(“Calm\n”);</p><p>else if (speed &lt;= 3)</p><p>printf(“Light air\n”);</p><p>else if (speed &lt;= 27)</p><p>printf(“Breeze\n”);</p><p>else if (speed &lt;= 47)</p><p>printf(“Gale\n”);</p><p>else if (speed &lt;= 63)</p><p>printf(“Storm\n”);</p><p>else</p><p>printf(“Hurricane\n”);</p><p>return 0;</p><p>}</p><p><strong>6.</strong> [was #10]</p><p>#include &lt;stdio.h&gt;</p><p>int main(void)</p><p>{</p><p>int check_digit, d, i1, i2, i3, i4, i5, j1, j2, j3, j4, j5,</p><p>first_sum, second_sum, total;</p><p>printf(“Enter the first (single) digit: “);</p><p>scanf(“%1d”, &amp;d);</p><p>printf(“Enter first group of five digits: “);</p><p>scanf(“%1d%1d%1d%1d%1d”, &amp;i1, &amp;i2, &amp;i3, &amp;i4, &amp;i5);</p><p>printf(“Enter second group of five digits: “);</p><p>scanf(“%1d%1d%1d%1d%1d”, &amp;j1, &amp;j2, &amp;j3, &amp;j4, &amp;j5);</p><p>printf(“Enter the last (single) digit: “);</p><p>scanf(“%1d”, &amp;check_digit);</p><p>first_sum = d + i2 + i4 + j1 + j3 + j5;</p><p>second_sum = i1 + i3 + i5 + j2 + j4;</p><p>total = 3 * first_sum + second_sum;</p><p>if (check_digit == 9 - ((total - 1) % 10))</p><p>printf(“VALID\n”);</p><p>else</p><p>printf(“NOT VALID\n”);</p><p>return 0;</p><p>}</p><p><strong>10.</strong> [was #14]</p><p>#include &lt;stdio.h&gt;</p><p>int main(void)</p><p>{</p><p>int grade;</p><p>printf(“Enter numerical grade: “);</p><p>scanf(“%d”, &amp;grade);</p><p>if (grade &lt; 0 || grade &gt; 100) {</p><p>printf(“Illegal grade\n”);</p><p>return 0;</p><p>}</p><p>switch (grade / 10) {</p><p>case 10:</p><p>case 9: printf(“Letter grade: A\n”);</p><p>​ break;</p><p>case 8: printf(“Letter grade: B\n”);</p><p>​ break;</p><p>case 7: printf(“Letter grade: C\n”);</p><p>​ break;</p><p>case 6: printf(“Letter grade: D\n”);</p><p>​ break;</p><p>case 5:</p><p>case 4:</p><p>case 3:</p><p>case 2:</p><p>case 1:</p><p>case 0: printf(“Letter grade: F\n”);</p><p>​ break;</p><p>}</p><p>return 0;</p><p>}</p><h3 id="Chapter-6"><a href="#Chapter-6" class="headerlink" title="Chapter 6"></a>Chapter 6</h3><h4 id="Answers-to-Selected-Exercises-1"><a href="#Answers-to-Selected-Exercises-1" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>4.</strong> [was #10] (c) is not equivalent to (a) and (b), because <code>i</code> is incremented <em>before</em> the loop body is executed.</p><p><strong>10.</strong> [was #12] Consider the following <code>while</code> loop:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while (…) {</span><br><span class="line">  …</span><br><span class="line">  continue;</span><br><span class="line">  …</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>The equivalent code using <code>goto</code> would have the following appearance:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">while (…) {</span><br><span class="line">  …</span><br><span class="line">  goto loop_end;</span><br><span class="line">  …</span><br><span class="line">  loop_end: ;   /* null statement */</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>12.</strong> [was #14]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (d = 2; d * d &lt;= n; d++)</span><br><span class="line">  if (n % d == 0)</span><br><span class="line">    break;</span><br></pre></td></tr></tbody></table></figure><p>The <code>if</code> statement that follows the loop will need to be modified as well:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (d * d &lt;= n)</span><br><span class="line">  printf("%d is divisible by %d\n", n, d);</span><br><span class="line">else</span><br><span class="line">  printf("%d is prime\n", n);</span><br></pre></td></tr></tbody></table></figure><p><strong>14.</strong> [was #16] The problem is the semicolon at the end of the first line. If we remove it, the statement is now correct:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (n % 2 == 0)</span><br><span class="line">  printf("n is even\n");</span><br></pre></td></tr></tbody></table></figure><h4 id="Answers-to-Selected-Programming-Projects-1"><a href="#Answers-to-Selected-Programming-Projects-1" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>2.</strong> [was #2]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int m, n, remainder;</span><br><span class="line"> </span><br><span class="line">  printf("Enter two integers: ");</span><br><span class="line">  scanf("%d%d", &amp;m, &amp;n);</span><br><span class="line"> </span><br><span class="line">  while (n != 0) {</span><br><span class="line">    remainder = m % n;</span><br><span class="line">    m = n;</span><br><span class="line">    n = remainder;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("Greatest common divisor: %d\n", m);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>4.</strong> [was #4]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  float commission, value;</span><br><span class="line"> </span><br><span class="line">  printf("Enter value of trade: ");</span><br><span class="line">  scanf("%f", &amp;value);</span><br><span class="line"> </span><br><span class="line">  while (value != 0.0f) {</span><br><span class="line">    if (value &lt; 2500.00f)</span><br><span class="line">      commission = 30.00f + .017f * value;</span><br><span class="line">    else if (value &lt; 6250.00f)</span><br><span class="line">      commission = 56.00f + .0066f * value;</span><br><span class="line">    else if (value &lt; 20000.00f)</span><br><span class="line">      commission = 76.00f + .0034f * value;</span><br><span class="line">    else if (value &lt; 50000.00f)</span><br><span class="line">      commission = 100.00f + .0022f * value;</span><br><span class="line">    else if (value &lt; 500000.00f)</span><br><span class="line">      commission = 155.00f + .0011f * value;</span><br><span class="line">    else</span><br><span class="line">      commission = 255.00f + .0009f * value;</span><br><span class="line"> </span><br><span class="line">    if (commission &lt; 39.00f)</span><br><span class="line">      commission = 39.00f;</span><br><span class="line"> </span><br><span class="line">    printf("Commission: $%.2f\n\n", commission);</span><br><span class="line"> </span><br><span class="line">    printf("Enter value of trade: ");</span><br><span class="line">    scanf("%f", &amp;value);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #6]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int i, n;</span><br><span class="line"> </span><br><span class="line">  printf("Enter limit on maximum square: ");</span><br><span class="line">  scanf("%d", &amp;n);</span><br><span class="line"> </span><br><span class="line">  for (i = 2; i * i &lt;= n; i += 2)</span><br><span class="line">    printf("%d\n", i * i);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>8.</strong> [was #8]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int i, n, start_day;</span><br><span class="line"> </span><br><span class="line">  printf("Enter number of days in month: ");</span><br><span class="line">  scanf("%d", &amp;n);</span><br><span class="line">  printf("Enter starting day of the week (1=Sun, 7=Sat): ");</span><br><span class="line">  scanf("%d", &amp;start_day);</span><br><span class="line"> </span><br><span class="line">  /* print any leading "blank dates" */</span><br><span class="line">  for (i = 1; i &lt; start_day; i++)</span><br><span class="line">    printf("   ");</span><br><span class="line"> </span><br><span class="line">  /* now print the calendar */</span><br><span class="line">  for (i = 1; i &lt;= n; i++) {</span><br><span class="line">    printf("%3d", i);</span><br><span class="line">    if ((start_day + i - 1) % 7 == 0)</span><br><span class="line">      printf("\n");</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-7"><a href="#Chapter-7" class="headerlink" title="Chapter 7"></a>Chapter 7</h3><h4 id="Answers-to-Selected-Exercises-2"><a href="#Answers-to-Selected-Exercises-2" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>3.</strong> [was #4] (b) is not legal.</p><p><strong>4.</strong> [was #6] (d) is illegal, since <code>printf</code> requires a string, not a character, as its first argument.</p><p><strong>10.</strong> [was #14] <code>unsigned</code> <code>int</code>, because the <code>(int)</code> cast applies only to <code>j</code>, not <code>j</code> <code>*</code> <code>k</code>.</p><p><strong>12.</strong> [was #16] The value of <code>i</code> is converted to <code>float</code> and added to <code>f</code>, then the result is converted to <code>double</code> and stored in <code>d</code>.</p><p><strong>14.</strong> [was #18] No. Converting <code>f</code> to <code>int</code> will fail if the value stored in <code>f</code> exceeds the largest value of type <code>int</code>.</p><h4 id="Answers-to-Selected-Programming-Projects-2"><a href="#Answers-to-Selected-Programming-Projects-2" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>1.</strong> [was #2] <code>short</code> <code>int</code> values are usually stored in 16 bits, causing failure at 182. <code>int</code> and <code>long</code> <code>int</code> values are usually stored in 32 bits, with failure occurring at 46341.</p><p><strong>2.</strong> [was #8]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int i, n;</span><br><span class="line">  char ch;</span><br><span class="line"> </span><br><span class="line">  printf("This program prints a table of squares.\n");</span><br><span class="line">  printf("Enter number of entries in table: ");</span><br><span class="line">  scanf("%d", &amp;n);</span><br><span class="line">  ch = getchar();</span><br><span class="line">    /* dispose of new-line character following number of entries */</span><br><span class="line">    /* could simply be getchar(); */</span><br><span class="line"> </span><br><span class="line">  for (i = 1; i &lt;= n; i++) {</span><br><span class="line">    printf("%10d%10d\n", i, i * i);</span><br><span class="line">    if (i % 24 == 0) {</span><br><span class="line">      printf("Press Enter to continue...");</span><br><span class="line">      ch = getchar();   /* or simply getchar(); */</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>5.</strong> [was #10]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;ctype.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int sum = 0;</span><br><span class="line">  char ch;</span><br><span class="line"> </span><br><span class="line">  printf("Enter a word: ");</span><br><span class="line"> </span><br><span class="line">  while ((ch = getchar()) != '\n')</span><br><span class="line">    switch (toupper(ch)) {</span><br><span class="line">      case 'D': case 'G':</span><br><span class="line">        sum += 2; break;</span><br><span class="line">      case 'B': case 'C': case 'M': case 'P':</span><br><span class="line">        sum += 3; break;</span><br><span class="line">      case 'F': case 'H': case 'V': case 'W': case 'Y':</span><br><span class="line">        sum += 4; break;</span><br><span class="line">      case 'K':</span><br><span class="line">        sum += 5; break;</span><br><span class="line">      case 'J': case 'X':</span><br><span class="line">        sum += 8; break;</span><br><span class="line">      case 'Q': case 'Z':</span><br><span class="line">        sum += 10; break;</span><br><span class="line">      default:</span><br><span class="line">        sum++; break;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">  printf("Scrabble value: %d\n", sum);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #12]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  printf("Size of int: %d\n", (int) sizeof(int));</span><br><span class="line">  printf("Size of short: %d\n", (int) sizeof(short));</span><br><span class="line">  printf("Size of long: %d\n", (int) sizeof(long));</span><br><span class="line">  printf("Size of float: %d\n", (int) sizeof(float));</span><br><span class="line">  printf("Size of double: %d\n", (int) sizeof(double));</span><br><span class="line">  printf("Size of long double: %d\n", (int) sizeof(long double));</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>Since the type of a <code>sizeof</code> expression may vary from one implementation to another, it’s necessary in C89 to cast <code>sizeof</code> expressions to a known type before printing them. The sizes of the basic types are small numbers, so it’s safe to cast them to <code>int</code>. (In general, however, it’s best to cast <code>sizeof</code> expressions to <code>unsigned</code> <code>long</code> and print them using <code>%lu</code>.) In C99, we can avoid the cast by using the <code>%zu</code> conversion specification.</p><h3 id="Chapter-8"><a href="#Chapter-8" class="headerlink" title="Chapter 8"></a>Chapter 8</h3><h4 id="Answers-to-Selected-Exercises-3"><a href="#Answers-to-Selected-Exercises-3" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>1.</strong> [was #4] The problem with <code>sizeof(a)</code> <code>/</code> <code>sizeof(</code><em>t</em><code>)</code> is that it can’t easily be checked for correctness by someone reading the program. (The reader would have to locate the declaration of <code>a</code> and make sure that its elements have type <em>t</em>.)</p><p><strong>2.</strong> [was #8] To use a digit <code>d</code> (in character form) as a subscript into the array <code>a</code>, we would write <code>a[d-'0']</code>. This assumes that digits have consecutive codes in the underlying character set, which is true of ASCII and other popular character sets.</p><p><strong>7.</strong> [was #10]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const int segments[10][7] = {{1, 1, 1, 1, 1, 1},</span><br><span class="line">                             {0, 1, 1},</span><br><span class="line">                             {1, 1, 0, 1, 1, 0, 1},</span><br><span class="line">                             {1, 1, 1, 1, 0, 0, 1},</span><br><span class="line">                             {0, 1, 1, 0, 0, 1, 1},</span><br><span class="line">                             {1, 0, 1, 1, 0, 1, 1},</span><br><span class="line">                             {1, 0, 1, 1, 1, 1, 1},</span><br><span class="line">                             {1, 1, 1},</span><br><span class="line">                             {1, 1, 1, 1, 1, 1, 1},</span><br><span class="line">                             {1, 1, 1, 1, 0, 1, 1}};</span><br></pre></td></tr></tbody></table></figure><h4 id="Answers-to-Selected-Programming-Projects-3"><a href="#Answers-to-Selected-Programming-Projects-3" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>2.</strong> [was #2]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int digit_count[10] = {0};</span><br><span class="line">  int digit;</span><br><span class="line">  long n;</span><br><span class="line"> </span><br><span class="line">  printf("Enter a number: ");</span><br><span class="line">  scanf("%ld", &amp;n);</span><br><span class="line"> </span><br><span class="line">  while (n &gt; 0) {</span><br><span class="line">    digit = n % 10;</span><br><span class="line">    digit_count[digit]++;</span><br><span class="line">    n /= 10;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf ("Digit:      ");</span><br><span class="line">  for (digit = 0; digit &lt;= 9; digit++)</span><br><span class="line">    printf("%3d", digit);</span><br><span class="line">  printf("\nOccurrences:");</span><br><span class="line">  for (digit = 0; digit &lt;= 9; digit++)</span><br><span class="line">    printf("%3d", digit_count[digit]);</span><br><span class="line">  printf("\n");</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>5.</strong> [was #6]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">#define NUM_RATES ((int) (sizeof(value) / sizeof(value[0])))</span><br><span class="line">#define INITIAL_BALANCE 100.00</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int i, low_rate, month, num_years, year;</span><br><span class="line">  double value[5];</span><br><span class="line"> </span><br><span class="line">  printf("Enter interest rate: ");</span><br><span class="line">  scanf("%d", &amp;low_rate);</span><br><span class="line">  printf("Enter number of years: ");</span><br><span class="line">  scanf("%d", &amp;num_years);</span><br><span class="line"> </span><br><span class="line">  printf("\nYears");</span><br><span class="line">  for (i = 0; i &lt; NUM_RATES; i++) {</span><br><span class="line">    printf("%6d%%", low_rate + i);</span><br><span class="line">    value[i] = INITIAL_BALANCE;</span><br><span class="line">  }</span><br><span class="line">  printf("\n");</span><br><span class="line"> </span><br><span class="line">  for (year = 1; year &lt;= num_years; year++) {</span><br><span class="line">    printf("%3d    ", year);</span><br><span class="line">    for (i = 0; i &lt; NUM_RATES; i++) {</span><br><span class="line">      for (month = 1; month &lt;= 12; month++)</span><br><span class="line">        value[i] += ((double) (low_rate + i) / 12) / 100.0 * value[i];</span><br><span class="line">      printf("%7.2f", value[i]);</span><br><span class="line">    }</span><br><span class="line">    printf("\n");</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>8.</strong> [was #12]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">#define NUM_QUIZZES  5</span><br><span class="line">#define NUM_STUDENTS 5</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int grades[NUM_STUDENTS][NUM_QUIZZES];</span><br><span class="line">  int high, low, quiz, student, total;</span><br><span class="line"> </span><br><span class="line">  for (student = 0; student &lt; NUM_STUDENTS; student++) {</span><br><span class="line">    printf("Enter grades for student %d: ", student + 1);</span><br><span class="line">    for (quiz = 0; quiz &lt; NUM_QUIZZES; quiz++)</span><br><span class="line">      scanf("%d", &amp;grades[student][quiz]);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("\nStudent  Total  Average\n");</span><br><span class="line">  for (student = 0; student &lt; NUM_STUDENTS; student++) {</span><br><span class="line">    printf("%4d      ", student + 1);</span><br><span class="line">    total = 0;</span><br><span class="line">    for (quiz = 0; quiz &lt; NUM_QUIZZES; quiz++)</span><br><span class="line">      total += grades[student][quiz];</span><br><span class="line">    printf("%3d     %3d\n", total, total / NUM_QUIZZES);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("\nQuiz  Average  High  Low\n");</span><br><span class="line">  for (quiz = 0; quiz &lt; NUM_QUIZZES; quiz++) {</span><br><span class="line">    printf("%3d     ", quiz + 1);</span><br><span class="line">    total = 0;</span><br><span class="line">    high = 0;</span><br><span class="line">    low = 100;</span><br><span class="line">    for (student = 0; student &lt; NUM_STUDENTS; student++) {</span><br><span class="line">      total += grades[student][quiz];</span><br><span class="line">      if (grades[student][quiz] &gt; high)</span><br><span class="line">        high = grades[student][quiz];</span><br><span class="line">      if (grades[student][quiz] &lt; low)</span><br><span class="line">        low = grades[student][quiz];</span><br><span class="line">    }</span><br><span class="line">    printf("%3d    %3d   %3d\n", total / NUM_STUDENTS, high, low);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-9"><a href="#Chapter-9" class="headerlink" title="Chapter 9"></a>Chapter 9</h3><h4 id="Answers-to-Selected-Exercises-4"><a href="#Answers-to-Selected-Exercises-4" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int check(int x, int y, int n)</span><br><span class="line">{</span><br><span class="line">  return (x &gt;= 0 &amp;&amp; x &lt;= n - 1 &amp;&amp; y &gt;= 0 &amp;&amp; y &lt;= n - 1);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>4.</strong> [was #4]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">int day_of_year(int month, int day, int year)</span><br><span class="line">{</span><br><span class="line">  int num_days[] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};</span><br><span class="line">  int day_count = 0, i;</span><br><span class="line"> </span><br><span class="line">  for (i = 1; i &lt; month; i++)</span><br><span class="line">    day_count += num_days[i-1];</span><br><span class="line"> </span><br><span class="line">  /* adjust for leap years, assuming they are divisible by 4 */</span><br><span class="line">  if (year % 4 == 0 &amp;&amp; month &gt; 2)</span><br><span class="line">    day_count++;</span><br><span class="line"> </span><br><span class="line">  return day_count + day;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>Using the expression <code>year</code> <code>%</code> <code>4</code> <code>==</code> <code>0</code> to test for leap years is not completely correct. Centuries are special cases: if a year is a multiple of 100, then it must also be a multiple of 400 in order to be a leap year. The correct test is</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">year % 4 == 0 &amp;&amp; (year % 100 != 0 || year % 400 == 0)</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #6; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int digit(int n, int k)</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  for (i = 1; i &lt; k; i++)</span><br><span class="line">    n /= 10;</span><br><span class="line"> </span><br><span class="line">  return n % 10;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>8.</strong> [was #8] (a) and (b) are valid prototypes. (c) is illegal, since it doesn’t specify the type of the parameter. (d) incorrectly specifies that <code>f</code> returns an <code>int</code> value in C89; in C99, omitting the return type is illegal.</p><p><strong>10.</strong> [was #10]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int largest(int a[], int n)</span><br><span class="line">{</span><br><span class="line">  int i, max = a[0];</span><br><span class="line"> </span><br><span class="line">  for (i = 1; i &lt; n; i++)</span><br><span class="line">    if (a[i] &gt; max)</span><br><span class="line">      max = a[i];</span><br><span class="line"> </span><br><span class="line">  return max;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int average(int a[], int n)</span><br><span class="line">{</span><br><span class="line">  int i, avg = 0;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; i &lt; n; i++)</span><br><span class="line">    avg += a[i];</span><br><span class="line"> </span><br><span class="line">  return avg / n;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(c)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int num_positive(int a[], int n)</span><br><span class="line">{</span><br><span class="line">  int i, count = 0;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; i &lt; n; i++)</span><br><span class="line">    if (a[i] &gt; 0)</span><br><span class="line">      count++;</span><br><span class="line"> </span><br><span class="line">  return count;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>15.</strong> [was #12; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">double median(double x, double y, double z)</span><br><span class="line">{</span><br><span class="line">  double result;</span><br><span class="line"> </span><br><span class="line">  if (x &lt;= y)</span><br><span class="line">    if (y &lt;= z) result = y;</span><br><span class="line">    else if (x &lt;= z) result = z;</span><br><span class="line">    else result = x;</span><br><span class="line">  else {</span><br><span class="line">    if (z &lt;= y) result = y;</span><br><span class="line">    else if (x &lt;= z) result = x;</span><br><span class="line">    else result = z;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  return result;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>17.</strong> [was #14]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int fact(int n)</span><br><span class="line">{</span><br><span class="line">  int i, result = 1;</span><br><span class="line"> </span><br><span class="line">  for (i = 2; i &lt;= n; i++)</span><br><span class="line">    result *= i;</span><br><span class="line"> </span><br><span class="line">  return result;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>19.</strong> [was #16] The following program tests the <code>pb</code> function:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">void pb(int n);</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int n;</span><br><span class="line"> </span><br><span class="line">  printf("Enter a number: ");</span><br><span class="line">  scanf("%d", &amp;n);</span><br><span class="line"> </span><br><span class="line">  printf("Output of pb: ");</span><br><span class="line">  pb(n);</span><br><span class="line">  printf("\n");</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">void pb(int n)</span><br><span class="line">{</span><br><span class="line">  if (n != 0) {</span><br><span class="line">    pb(n / 2);</span><br><span class="line">    putchar('0' + n % 2);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>pb</code> prints the binary representation of the argument <code>n</code>, assuming that <code>n</code> is greater than 0. (We also assume that digits have consecutive codes in the underlying character set.) For example:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter a number: 53</span><br><span class="line">Output of pb: 110101</span><br></pre></td></tr></tbody></table></figure><p>A trace of <code>pb</code>‘s execution would look like this:</p><p><code>pb(53)</code> finds that 53 is not equal to 0, so it calls<br><code>pb(26)</code>, which finds that 26 is not equal to 0, so it calls<br><code>pb(13)</code>, which finds that 13 is not equal to 0, so it calls<br><code>pb(6)</code>, which finds that 6 is not equal to 0, so it calls<br><code>pb(3)</code>, which finds that 3 is not equal to 0, so it calls<br><code>pb(1)</code>, which finds that 1 is not equal to 0, so it calls<br><code>pb(0)</code>, which finds that 0 <em>is</em> equal to 0, so it returns, causing<br><code>pb(1)</code> to print <code>1</code> and return, causing<br><code>pb(3)</code> to print <code>1</code> and return, causing<br><code>pb(6)</code> to print <code>0</code> and return, causing<br><code>pb(13)</code> to print <code>1</code> and return, causing<br><code>pb(26)</code> to print <code>0</code> and return, causing<br><code>pb(53)</code> to print <code>1</code> and return.</p><h3 id="Chapter-10"><a href="#Chapter-10" class="headerlink" title="Chapter 10"></a>Chapter 10</h3><h4 id="Answers-to-Selected-Exercises-5"><a href="#Answers-to-Selected-Exercises-5" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>1.</strong> [was #2] (a) <code>a</code>, <code>b</code>, and <code>c</code> are visible.<br>(b) <code>a</code>, and <code>d</code> are visible.<br>(c) <code>a</code>, <code>d</code>, and <code>e</code> are visible.<br>(d) <code>a</code> and <code>f</code> are visible.</p><h4 id="Answers-to-Selected-Programming-Projects-4"><a href="#Answers-to-Selected-Programming-Projects-4" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>3.</strong> [was #4]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdbool.h&gt;   /* C99 only */</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"> </span><br><span class="line">#define NUM_CARDS 5</span><br><span class="line">#define RANK 0</span><br><span class="line">#define SUIT 1</span><br><span class="line"> </span><br><span class="line">/* external variables */</span><br><span class="line">int hand[NUM_CARDS][2];</span><br><span class="line">/*    0    1</span><br><span class="line">    ____ ____</span><br><span class="line"> 0 |____|____|</span><br><span class="line"> 1 |____|____|</span><br><span class="line"> 2 |____|____|</span><br><span class="line"> 3 |____|____|</span><br><span class="line"> 4 |____|____|</span><br><span class="line">    rank suit</span><br><span class="line">*/</span><br><span class="line"> </span><br><span class="line">bool straight, flush, four, three;</span><br><span class="line">int pairs;   /* can be 0, 1, or 2 */</span><br><span class="line"> </span><br><span class="line">/* prototypes */</span><br><span class="line">void read_cards(void);</span><br><span class="line">void analyze_hand(void);</span><br><span class="line">void print_result(void);</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * main: Calls read_cards, analyze_hand, and print_result *</span><br><span class="line"> *       repeatedly.                                      *</span><br><span class="line"> **********************************************************/</span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  for (;;) {</span><br><span class="line">    read_cards();</span><br><span class="line">    analyze_hand();</span><br><span class="line">    print_result();</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * read_cards: Reads the cards into the external variable *</span><br><span class="line"> *             hand; checks for bad cards and duplicate   *</span><br><span class="line"> *             cards.                                     *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void read_cards(void)</span><br><span class="line">{</span><br><span class="line">  char ch, rank_ch, suit_ch;</span><br><span class="line">  int i, rank, suit;</span><br><span class="line">  bool bad_card, duplicate_card;</span><br><span class="line">  int cards_read = 0;</span><br><span class="line"> </span><br><span class="line">  while (cards_read &lt; NUM_CARDS) {</span><br><span class="line">    bad_card = false;</span><br><span class="line"> </span><br><span class="line">    printf("Enter a card: ");</span><br><span class="line"> </span><br><span class="line">    rank_ch = getchar();</span><br><span class="line">    switch (rank_ch) {</span><br><span class="line">      case '0':           exit(EXIT_SUCCESS);</span><br><span class="line">      case '2':           rank = 0; break;</span><br><span class="line">      case '3':           rank = 1; break;</span><br><span class="line">      case '4':           rank = 2; break;</span><br><span class="line">      case '5':           rank = 3; break;</span><br><span class="line">      case '6':           rank = 4; break;</span><br><span class="line">      case '7':           rank = 5; break;</span><br><span class="line">      case '8':           rank = 6; break;</span><br><span class="line">      case '9':           rank = 7; break;</span><br><span class="line">      case 't': case 'T': rank = 8; break;</span><br><span class="line">      case 'j': case 'J': rank = 9; break;</span><br><span class="line">      case 'q': case 'Q': rank = 10; break;</span><br><span class="line">      case 'k': case 'K': rank = 11; break;</span><br><span class="line">      case 'a': case 'A': rank = 12; break;</span><br><span class="line">      default:            bad_card = true;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    suit_ch = getchar();</span><br><span class="line">    switch (suit_ch) {</span><br><span class="line">      case 'c': case 'C': suit = 0; break;</span><br><span class="line">      case 'd': case 'D': suit = 1; break;</span><br><span class="line">      case 'h': case 'H': suit = 2; break;</span><br><span class="line">      case 's': case 'S': suit = 3; break;</span><br><span class="line">      default:            bad_card = true;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    while ((ch = getchar()) != '\n')</span><br><span class="line">      if (ch != ' ') bad_card = true;</span><br><span class="line"> </span><br><span class="line">    if (bad_card) {</span><br><span class="line">      printf("Bad card; ignored.\n");</span><br><span class="line">      continue;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    duplicate_card = false;</span><br><span class="line">    for (i = 0; i &lt; cards_read; i++)</span><br><span class="line">      if (hand[i][RANK] == rank &amp;&amp; hand[i][SUIT] == suit) {</span><br><span class="line">        printf("Duplicate card; ignored.\n");</span><br><span class="line">        duplicate_card = true;</span><br><span class="line">        break;</span><br><span class="line">      }</span><br><span class="line"> </span><br><span class="line">    if (!duplicate_card) {</span><br><span class="line">      hand[cards_read][RANK] = rank;</span><br><span class="line">      hand[cards_read][SUIT] = suit;</span><br><span class="line">      cards_read++;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * analyze_hand: Determines whether the hand contains a   *</span><br><span class="line"> *               straight, a flush, four-of-a-kind,       *</span><br><span class="line"> *               and/or three-of-a-kind; determines the   *</span><br><span class="line"> *               number of pairs; stores the results into *</span><br><span class="line"> *               the external variables straight, flush,  *</span><br><span class="line"> *               four, three, and pairs.                  *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void analyze_hand(void)</span><br><span class="line">{</span><br><span class="line">  int rank, suit, card, pass, run;</span><br><span class="line"> </span><br><span class="line">  straight = true;</span><br><span class="line">  flush = true;</span><br><span class="line">  four = false;</span><br><span class="line">  three = false;</span><br><span class="line">  pairs = 0;</span><br><span class="line"> </span><br><span class="line">  /* sort cards by rank */</span><br><span class="line">  for (pass = 1; pass &lt; NUM_CARDS; pass++)</span><br><span class="line">    for (card = 0; card &lt; NUM_CARDS - pass; card++) {</span><br><span class="line">      rank = hand[card][RANK];</span><br><span class="line">      suit = hand[card][SUIT];</span><br><span class="line">      if (hand[card+1][RANK] &lt; rank) {</span><br><span class="line">        hand[card][RANK] = hand[card+1][RANK];</span><br><span class="line">        hand[card][SUIT] = hand[card+1][SUIT];</span><br><span class="line">        hand[card+1][RANK] = rank;</span><br><span class="line">        hand[card+1][SUIT] = suit;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">  /* check for flush */</span><br><span class="line">  suit = hand[0][SUIT];</span><br><span class="line">  for (card = 1; card &lt; NUM_CARDS; card++)</span><br><span class="line">    if (hand[card][SUIT] != suit)</span><br><span class="line">      flush = false;</span><br><span class="line"> </span><br><span class="line">  /* check for straight */</span><br><span class="line">  for (card = 0; card &lt; NUM_CARDS - 1; card++)</span><br><span class="line">    if (hand[card][RANK] + 1 != hand[card+1][RANK])</span><br><span class="line">      straight = false;</span><br><span class="line"> </span><br><span class="line">  /* check for 4-of-a-kind, 3-of-a-kind, and pairs by</span><br><span class="line">     looking for "runs" of cards with identical ranks */</span><br><span class="line">  card = 0;</span><br><span class="line">  while (card &lt; NUM_CARDS) {</span><br><span class="line">    rank = hand[card][RANK];</span><br><span class="line">    run = 0;</span><br><span class="line">    do {</span><br><span class="line">      run++;</span><br><span class="line">      card++;</span><br><span class="line">    } while (card &lt; NUM_CARDS &amp;&amp; hand[card][RANK] == rank);</span><br><span class="line">    switch (run) {</span><br><span class="line">      case 2: pairs++;      break;</span><br><span class="line">      case 3: three = true; break;</span><br><span class="line">      case 4: four = true;  break;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * print_result: Prints the classification of the hand,   *</span><br><span class="line"> *               based on the values of the external      *</span><br><span class="line"> *               variables straight, flush, four, three,  *</span><br><span class="line"> *               and pairs.                               *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void print_result(void)</span><br><span class="line">{</span><br><span class="line">  if (straight &amp;&amp; flush) printf("Straight flush");</span><br><span class="line">  else if (four)         printf("Four of a kind");</span><br><span class="line">  else if (three &amp;&amp;</span><br><span class="line">           pairs == 1)   printf("Full house");</span><br><span class="line">  else if (flush)        printf("Flush");</span><br><span class="line">  else if (straight)     printf("Straight");</span><br><span class="line">  else if (three)        printf("Three of a kind");</span><br><span class="line">  else if (pairs == 2)   printf("Two pairs");</span><br><span class="line">  else if (pairs == 1)   printf("Pair");</span><br><span class="line">  else                   printf("High card");</span><br><span class="line"> </span><br><span class="line">  printf("\n\n");</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>5.</strong> [was #6]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdbool.h&gt;   /* C99 only */</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"> </span><br><span class="line">#define NUM_RANKS 13</span><br><span class="line">#define NUM_SUITS 4</span><br><span class="line">#define NUM_CARDS 5</span><br><span class="line"> </span><br><span class="line">/* external variables */</span><br><span class="line">int num_in_rank[NUM_RANKS];</span><br><span class="line">int num_in_suit[NUM_SUITS];</span><br><span class="line">bool straight, flush, four, three;</span><br><span class="line">int pairs;   /* can be 0, 1, or 2 */</span><br><span class="line"> </span><br><span class="line">/* prototypes */</span><br><span class="line">void read_cards(void);</span><br><span class="line">void analyze_hand(void);</span><br><span class="line">void print_result(void);</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * main: Calls read_cards, analyze_hand, and print_result *</span><br><span class="line"> *       repeatedly.                                      *</span><br><span class="line"> **********************************************************/</span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  for (;;) {</span><br><span class="line">    read_cards();</span><br><span class="line">    analyze_hand();</span><br><span class="line">    print_result();</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * read_cards: Reads the cards into the external          *</span><br><span class="line"> *             variables num_in_rank and num_in_suit;     *</span><br><span class="line"> *             checks for bad cards and duplicate cards.  *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void read_cards(void)</span><br><span class="line">{</span><br><span class="line">  bool card_exists[NUM_RANKS][NUM_SUITS];</span><br><span class="line">  char ch, rank_ch, suit_ch;</span><br><span class="line">  int rank, suit;</span><br><span class="line">  bool bad_card;</span><br><span class="line">  int cards_read = 0;</span><br><span class="line"> </span><br><span class="line">  for (rank = 0; rank &lt; NUM_RANKS; rank++) {</span><br><span class="line">    num_in_rank[rank] = 0;</span><br><span class="line">    for (suit = 0; suit &lt; NUM_SUITS; suit++)</span><br><span class="line">      card_exists[rank][suit] = false;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  for (suit = 0; suit &lt; NUM_SUITS; suit++)</span><br><span class="line">    num_in_suit[suit] = 0;</span><br><span class="line"> </span><br><span class="line">  while (cards_read &lt; NUM_CARDS) {</span><br><span class="line">    bad_card = false;</span><br><span class="line"> </span><br><span class="line">    printf("Enter a card: ");</span><br><span class="line"> </span><br><span class="line">    rank_ch = getchar();</span><br><span class="line">    switch (rank_ch) {</span><br><span class="line">      case '0':           exit(EXIT_SUCCESS);</span><br><span class="line">      case '2':           rank = 0; break;</span><br><span class="line">      case '3':           rank = 1; break;</span><br><span class="line">      case '4':           rank = 2; break;</span><br><span class="line">      case '5':           rank = 3; break;</span><br><span class="line">      case '6':           rank = 4; break;</span><br><span class="line">      case '7':           rank = 5; break;</span><br><span class="line">      case '8':           rank = 6; break;</span><br><span class="line">      case '9':           rank = 7; break;</span><br><span class="line">      case 't': case 'T': rank = 8; break;</span><br><span class="line">      case 'j': case 'J': rank = 9; break;</span><br><span class="line">      case 'q': case 'Q': rank = 10; break;</span><br><span class="line">      case 'k': case 'K': rank = 11; break;</span><br><span class="line">      case 'a': case 'A': rank = 12; break;</span><br><span class="line">      default:            bad_card = true;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    suit_ch = getchar();</span><br><span class="line">    switch (suit_ch) {</span><br><span class="line">      case 'c': case 'C': suit = 0; break;</span><br><span class="line">      case 'd': case 'D': suit = 1; break;</span><br><span class="line">      case 'h': case 'H': suit = 2; break;</span><br><span class="line">      case 's': case 'S': suit = 3; break;</span><br><span class="line">      default:            bad_card = true;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    while ((ch = getchar()) != '\n')</span><br><span class="line">      if (ch != ' ') bad_card = true;</span><br><span class="line"> </span><br><span class="line">    if (bad_card)</span><br><span class="line">      printf("Bad card; ignored.\n");</span><br><span class="line">    else if (card_exists[rank][suit])</span><br><span class="line">      printf("Duplicate card; ignored.\n");</span><br><span class="line">    else {</span><br><span class="line">      num_in_rank[rank]++;</span><br><span class="line">      num_in_suit[suit]++;</span><br><span class="line">      card_exists[rank][suit] = true;</span><br><span class="line">      cards_read++;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * analyze_hand: Determines whether the hand contains a   *</span><br><span class="line"> *               straight, a flush, four-of-a-kind,       *</span><br><span class="line"> *               and/or three-of-a-kind; determines the   *</span><br><span class="line"> *               number of pairs; stores the results into *</span><br><span class="line"> *               the external variables straight, flush,  *</span><br><span class="line"> *               four, three, and pairs.                  *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void analyze_hand(void)</span><br><span class="line">{</span><br><span class="line">  int num_consec = 0;</span><br><span class="line">  int rank, suit;</span><br><span class="line"> </span><br><span class="line">  straight = false;</span><br><span class="line">  flush = false;</span><br><span class="line">  four = false;</span><br><span class="line">  three = false;</span><br><span class="line">  pairs = 0;</span><br><span class="line"> </span><br><span class="line">  /* check for flush */</span><br><span class="line">  for (suit = 0; suit &lt; NUM_SUITS; suit++)</span><br><span class="line">    if (num_in_suit[suit] == NUM_CARDS)</span><br><span class="line">      flush = true;</span><br><span class="line"> </span><br><span class="line">  /* check for straight */</span><br><span class="line">  rank = 0;</span><br><span class="line">  while (num_in_rank[rank] == 0) rank++;</span><br><span class="line">  for (; rank &lt; NUM_RANKS &amp;&amp; num_in_rank[rank] &gt; 0; rank++)</span><br><span class="line">    num_consec++;</span><br><span class="line">  if (num_consec == NUM_CARDS) {</span><br><span class="line">    straight = true;</span><br><span class="line">    return;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  /* check for ace-low straight */</span><br><span class="line">  if (num_consec == NUM_CARDS - 1 &amp;&amp;</span><br><span class="line">      num_in_rank[0] &gt; 0 &amp;&amp; num_in_rank[NUM_RANKS-1] &gt; 0) {</span><br><span class="line">    straight = true;</span><br><span class="line">    return;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  /* check for 4-of-a-kind, 3-of-a-kind, and pairs */</span><br><span class="line">  for (rank = 0; rank &lt; NUM_RANKS; rank++) {</span><br><span class="line">    if (num_in_rank[rank] == 4) four = true;</span><br><span class="line">    if (num_in_rank[rank] == 3) three = true;</span><br><span class="line">    if (num_in_rank[rank] == 2) pairs++;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * print_result: Prints the classification of the hand,   *</span><br><span class="line"> *               based on the values of the external      *</span><br><span class="line"> *               variables straight, flush, four, three,  *</span><br><span class="line"> *               and pairs.                               *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void print_result(void)</span><br><span class="line">{</span><br><span class="line">  if (straight &amp;&amp; flush) printf("Straight flush");</span><br><span class="line">  else if (four)         printf("Four of a kind");</span><br><span class="line">  else if (three &amp;&amp;</span><br><span class="line">           pairs == 1)   printf("Full house");</span><br><span class="line">  else if (flush)        printf("Flush");</span><br><span class="line">  else if (straight)     printf("Straight");</span><br><span class="line">  else if (three)        printf("Three of a kind");</span><br><span class="line">  else if (pairs == 2)   printf("Two pairs");</span><br><span class="line">  else if (pairs == 1)   printf("Pair");</span><br><span class="line">  else                   printf("High card");</span><br><span class="line"> </span><br><span class="line">  printf("\n\n");</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-11"><a href="#Chapter-11" class="headerlink" title="Chapter 11"></a>Chapter 11</h3><h4 id="Answers-to-Selected-Exercises-6"><a href="#Answers-to-Selected-Exercises-6" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2] (e), (f), and (i) are legal. (a) is illegal because <code>p</code> is a pointer to an integer and <code>i</code> is an integer. (b) is illegal because <code>*p</code> is an integer and <code>&amp;i</code> is a pointer to an integer. (c) is illegal because <code>&amp;p</code> is a pointer to a pointer to an integer and <code>q</code> is a pointer to an integer. (d) is illegal for reasons similar to (c). (g) is illegal because <code>p</code> is a pointer to an integer and <code>*q</code> is an integer. (h) is illegal because <code>*p</code> is an integer and <code>q</code> is a pointer to an integer.</p><p><strong>4.</strong> [was #4; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">void swap(int *p, int *q)</span><br><span class="line">{</span><br><span class="line">  int temp;</span><br><span class="line"> </span><br><span class="line">  temp = *p;</span><br><span class="line">  *p = *q;</span><br><span class="line">  *q = temp;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #6]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">void find_two_largest(int a[], int n, int *largest,</span><br><span class="line">                      int *second_largest)</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  if (a[0] &gt; a[1]) {</span><br><span class="line">    *largest = a[0];</span><br><span class="line">    *second_largest = a[1];</span><br><span class="line">  } else {</span><br><span class="line">    *largest = a[1];</span><br><span class="line">    *second_largest = a[0];</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  for (i = 2; i &lt; n; i++)</span><br><span class="line">    if (a[i] &gt; *largest) {</span><br><span class="line">      *second_largest = *largest;</span><br><span class="line">      *largest = a[i];</span><br><span class="line">    } else if (a[i] &gt; *second_largest)</span><br><span class="line">      *second_largest = a[i];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-12"><a href="#Chapter-12" class="headerlink" title="Chapter 12"></a>Chapter 12</h3><h4 id="Answers-to-Selected-Exercises-7"><a href="#Answers-to-Selected-Exercises-7" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2] The statement is illegal because pointers cannot be added. Here’s a legal statement that has the desired effect:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">middle = low + (high - low) / 2;</span><br></pre></td></tr></tbody></table></figure><p>The value of <code>(high</code> <code>-</code> <code>low)</code> <code>/</code> <code>2</code> is an integer, not a pointer, so it can legally be added to <code>low</code>.</p><p><strong>4.</strong> [was #6]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">int *top_ptr;</span><br><span class="line"> </span><br><span class="line">void make_empty(void)</span><br><span class="line">{</span><br><span class="line">  top_ptr = &amp;contents[0];</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">bool is_empty(void)</span><br><span class="line">{</span><br><span class="line">  return top_ptr == &amp;contents[0];</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">bool is_full(void)</span><br><span class="line">{</span><br><span class="line">  return top_ptr == &amp;contents[STACK_SIZE];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #10; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int sum_array(const int a[], int n)</span><br><span class="line">{</span><br><span class="line">  int *p, sum;</span><br><span class="line"> </span><br><span class="line">  sum = 0;</span><br><span class="line">  for (p = a; p &lt; a + n; p++)</span><br><span class="line">    sum += *p;</span><br><span class="line">  return sum;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>13.</strong> [was #12; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#define N 10</span><br><span class="line"> </span><br><span class="line">double ident[N][N], *p;</span><br><span class="line">int num_zeros = N;</span><br><span class="line"> </span><br><span class="line">for (p = &amp;ident[0][0]; p &lt;= &amp;ident[N-1][N-1]; p++)</span><br><span class="line">  if (num_zeros == N) {</span><br><span class="line">    *p = 1.0;</span><br><span class="line">    num_zeros = 0;</span><br><span class="line">  } else {</span><br><span class="line">    *p = 0.0;</span><br><span class="line">    num_zeros++;</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure><p><strong>15.</strong> [was #14]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int *p;</span><br><span class="line"> </span><br><span class="line">for (p = temperatures[i]; p &lt; temperatures[i] + 24; p++)</span><br><span class="line">  printf("%d ", *p);</span><br></pre></td></tr></tbody></table></figure><h4 id="Answers-to-Selected-Programming-Projects-5"><a href="#Answers-to-Selected-Programming-Projects-5" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>1.</strong> [was #4]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">#define MSG_LEN 80     /* maximum length of message */</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  char msg[MSG_LEN];</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  printf("Enter a message: ");</span><br><span class="line">  for (i = 0; i &lt; MSG_LEN; i++) {</span><br><span class="line">    msg[i] = getchar();</span><br><span class="line">    if (msg[i] == '\n')</span><br><span class="line">      break;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("Reversal is: ");</span><br><span class="line">  for (i--; i &gt;= 0; i--)</span><br><span class="line">    putchar(msg[i]);</span><br><span class="line">  putchar('\n');</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">#define MSG_LEN 80     /* maximum length of message */</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  char msg[MSG_LEN], *p;</span><br><span class="line"> </span><br><span class="line">  printf("Enter a message: ");</span><br><span class="line">  for (p = &amp;msg[0]; p &lt; &amp;msg[MSG_LEN]; p++) {</span><br><span class="line">    *p = getchar();</span><br><span class="line">    if (*p == '\n')</span><br><span class="line">      break;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("Reversal is: ");</span><br><span class="line">  for (p--; p &gt;= &amp;msg[0]; p--)</span><br><span class="line">    putchar(*p);</span><br><span class="line">  putchar('\n');</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>3.</strong> [was #8]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">#define MSG_LEN 80     /* maximum length of message */</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  char msg[MSG_LEN], *p;</span><br><span class="line"> </span><br><span class="line">  printf("Enter a message: ");</span><br><span class="line">  for (p = msg; p &lt; msg + MSG_LEN; p++) {</span><br><span class="line">    *p = getchar();</span><br><span class="line">    if (*p == '\n')</span><br><span class="line">      break;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("Reversal is: ");</span><br><span class="line">  for (p--; p &gt;= msg; p--)</span><br><span class="line">    putchar(*p);</span><br><span class="line">  putchar('\n');</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-13"><a href="#Chapter-13" class="headerlink" title="Chapter 13"></a>Chapter 13</h3><h4 id="Answers-to-Selected-Exercises-8"><a href="#Answers-to-Selected-Exercises-8" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2]</p><p>(a) Illegal; <code>p</code> is not a character.<br>(b) Legal; output is <code>a</code>.<br>(c) Legal; output is <code>abc</code>.<br>(d) Illegal; <code>*p</code> is not a pointer.</p><p><strong>4.</strong> [was #4]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">int read_line(char str[], int n)</span><br><span class="line">{</span><br><span class="line">  int ch, i = 0;</span><br><span class="line"> </span><br><span class="line">  while ((ch = getchar()) != '\n')</span><br><span class="line">    if (i == 0 &amp;&amp; isspace(ch))</span><br><span class="line">      ;   /* ignore */</span><br><span class="line">    else if (i &lt; n)</span><br><span class="line">      str[i++] = ch;</span><br><span class="line">  str[i] = '\0';</span><br><span class="line">  return i;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int read_line(char str[], int n)</span><br><span class="line">{</span><br><span class="line">  int ch, i = 0;</span><br><span class="line"> </span><br><span class="line">  while (!isspace(ch = getchar()))</span><br><span class="line">    if (i &lt; n)</span><br><span class="line">      str[i++] = ch;</span><br><span class="line">  str[i] = '\0';</span><br><span class="line">  return i;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(c)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">int read_line(char str[], int n)</span><br><span class="line">{</span><br><span class="line">  int ch, i = 0;</span><br><span class="line"> </span><br><span class="line">  do {</span><br><span class="line">    ch = getchar();</span><br><span class="line">    if (i &lt; n)</span><br><span class="line">      str[i++] = ch;</span><br><span class="line">  } while (ch != '\n');</span><br><span class="line">  str[i] = '\0';</span><br><span class="line">  return i;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(d)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">int read_line(char str[], int n)</span><br><span class="line">{</span><br><span class="line">  int ch, i;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; i &lt; n; i++) {</span><br><span class="line">    ch = getchar();</span><br><span class="line">    if (ch == '\n')</span><br><span class="line">      break;</span><br><span class="line">    str[i] = ch;</span><br><span class="line">  }</span><br><span class="line">  str[i] = '\0';</span><br><span class="line">  return i;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #6]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">void censor(char s[])</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; s[i] != '\0'; i++)</span><br><span class="line">    if (s[i] == 'f' &amp;&amp; s[i+1] == 'o' &amp;&amp; s[i+2] =='o')</span><br><span class="line">      s[i] = s[i+1] = s[i+2] = 'x';</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>Note that the short-circuit evaluation of <code>&amp;&amp;</code> prevents the <code>if</code> statement from testing characters that follow the null character.</p><p><strong>8.</strong> [was #10] <code>tired-or-wired?</code></p><p><strong>10.</strong> [was #12] The value of <code>q</code> is undefined, so the call of <code>strcpy</code> attempts to copy the string pointed to by <code>p</code> into some unknown area of memory. Exercise 2 in Chapter 17 discusses how to write this function correctly.</p><p><strong>15.</strong> [was #8]</p><p>(a) 3<br>(b) 0<br>(c) The length of the longest prefix of the string <code>s</code> that consists entirely of characters from the string <code>t</code>. Or, equivalently, the position of the first character in <code>s</code> that is not also in <code>t</code>.</p><p><strong>16.</strong> [was #16]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">int count_spaces(const char *s)</span><br><span class="line">{</span><br><span class="line">  int count = 0;</span><br><span class="line"> </span><br><span class="line">  while (*s)</span><br><span class="line">    if (*s++ == ' ')</span><br><span class="line">      count++;</span><br><span class="line">  return count;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="Answers-to-Selected-Programming-Projects-6"><a href="#Answers-to-Selected-Programming-Projects-6" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>1.</strong> [was #14]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"> </span><br><span class="line">#define WORD_LEN 20</span><br><span class="line"> </span><br><span class="line">void read_line(char str[], int n);</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  char smallest_word[WORD_LEN+1],</span><br><span class="line">       largest_word[WORD_LEN+1],</span><br><span class="line">       current_word[WORD_LEN+1];</span><br><span class="line"> </span><br><span class="line">  printf("Enter word: ");</span><br><span class="line">  read_line(current_word, WORD_LEN);</span><br><span class="line">  strcpy(smallest_word, strcpy(largest_word, current_word));</span><br><span class="line"> </span><br><span class="line">  while (strlen(current_word) != 4) {</span><br><span class="line">    printf("Enter word: ");</span><br><span class="line">    read_line(current_word, WORD_LEN);</span><br><span class="line">    if (strcmp(current_word, smallest_word) &lt; 0)</span><br><span class="line">      strcpy(smallest_word, current_word);</span><br><span class="line">    if (strcmp(current_word, largest_word) &gt; 0)</span><br><span class="line">      strcpy(largest_word, current_word);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("\nSmallest word: %s\n", smallest_word);</span><br><span class="line">  printf("Largest word: %s\n", largest_word);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">void read_line(char str[], int n)</span><br><span class="line">{</span><br><span class="line">  int ch, i = 0;</span><br><span class="line"> </span><br><span class="line">  while ((ch = getchar()) != '\n')</span><br><span class="line">    if (i &lt; n)</span><br><span class="line">      str[i++] = ch;</span><br><span class="line">  str[i] = '\0';</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>4.</strong> [was #18]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  for (i = argc - 1; i &gt; 0; i--)</span><br><span class="line">    printf("%s ", argv[i]);</span><br><span class="line">  printf("\n");</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #20]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;ctype.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"> </span><br><span class="line">#define NUM_PLANETS 9</span><br><span class="line"> </span><br><span class="line">int string_equal(const char *s, const char *t);</span><br><span class="line"> </span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">{</span><br><span class="line">  char *planets[] = {"Mercury", "Venus", "Earth",</span><br><span class="line">                     "Mars", "Jupiter", "Saturn",</span><br><span class="line">                     "Uranus", "Neptune", "Pluto"};</span><br><span class="line">  int i, j;</span><br><span class="line"> </span><br><span class="line">  for (i = 1; i &lt; argc; i++) {</span><br><span class="line">    for (j = 0; j &lt; NUM_PLANETS; j++)</span><br><span class="line">      if (string_equal(argv[i], planets[j])) {</span><br><span class="line">        printf("%s is planet %d\n", argv[i], j + 1);</span><br><span class="line">        break;</span><br><span class="line">      }</span><br><span class="line">    if (j == NUM_PLANETS)</span><br><span class="line">      printf("%s is not a planet\n", argv[i]);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">int string_equal(const char *s, const char *t)</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; toupper(s[i]) == toupper(t[i]); i++)</span><br><span class="line">    if (s[i] == '\0')</span><br><span class="line">      return 1;</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-14"><a href="#Chapter-14" class="headerlink" title="Chapter 14"></a>Chapter 14</h3><h4 id="Answers-to-Selected-Exercises-9"><a href="#Answers-to-Selected-Exercises-9" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2] <code>#define NELEMS(a) ((int) (sizeof(a) / sizeof(a[0])))</code></p><p><strong>4.</strong> [was #4]</p><p>(a) One problem stems from the lack of parentheses around the replacement list. For example, the statement</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = 1/AVG(b, c);</span><br></pre></td></tr></tbody></table></figure><p>will be replaced by</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = 1/(b+c)/2;</span><br></pre></td></tr></tbody></table></figure><p>Even if we add the missing parentheses, though, the macro still has problems, because it needs parentheses around <code>x</code> and <code>y</code> in the replacement list. The preprocessor will turn the statement</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = AVG(b&lt;c, c&gt;d);</span><br></pre></td></tr></tbody></table></figure><p>into</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = ((b&lt;c+c&gt;d)/2);</span><br></pre></td></tr></tbody></table></figure><p>which is equivalent to</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = ((b&lt;(c+c)&gt;d)/2);</span><br></pre></td></tr></tbody></table></figure><p>Here’s the final (corrected) version of the macro:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define AVG(x,y) (((x)+(y))/2)</span><br></pre></td></tr></tbody></table></figure><p>(b) The problem is the lack of parentheses around the replacement list. For example,</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = 1/AREA(b, c);</span><br></pre></td></tr></tbody></table></figure><p>becomes</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = 1/(b)*(c);</span><br></pre></td></tr></tbody></table></figure><p>Here’s the corrected macro:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define AREA(x,y) ((x)*(y))</span><br></pre></td></tr></tbody></table></figure><p><strong>5.</strong> [was #6]</p><p>(a) The call of <code>putchar</code> expands into the following statement:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">putchar(('a'&lt;=(s[++i])&amp;&amp;(s[++i])&lt;='z'?(s[++i])-'a'+'A':(s[++i])));</span><br></pre></td></tr></tbody></table></figure><p>The character <code>a</code> is less than or equal to <code>s[1]</code> (which is <code>b</code>), yielding a true condition. The character <code>s[2]</code> (which is <code>c</code>) is less than or equal to <code>z</code>, which is also true. The value printed is <code>s[3]-'a'+'A'</code>, which is <code>D</code> (assuming that the character set is ASCII).</p><p>(b) The character <code>a</code> is not less than or equal to <code>s[1]</code> (which is <code>1</code>) so the test condition is false. The value printed is <code>s[2]</code>, which is <code>2</code>.</p><p><strong>7.</strong> [was #8]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">long long_max(long x, long y)</span><br><span class="line">{</span><br><span class="line">  return x &gt; y ? x : y;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>The preprocessor would actually put all the tokens on one line, but this version is more readable.</p><p>(b) The problem with types such as <code>unsigned</code> <code>long</code> is that they require two words, which prevents <code>GENERIC_MAX</code> from creating the desired function name. For example, <code>GENERIC_MAX(unsigned</code> <code>long)</code> would expand into</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">unsigned long unsigned long_max(unsigned long x, unsigned long y)</span><br><span class="line">{</span><br><span class="line">  return x &gt; y ? x : y;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(c) To make <code>GENERIC_MAX</code> work with any basic type, use a type definition to rename the type:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typedef unsigned long ULONG;</span><br></pre></td></tr></tbody></table></figure><p>We can now write <code>GENERIC_MAX(ULONG)</code>.</p><p><strong>12.</strong> [was #10] (c) and (e) will fail, since <code>M</code> is defined.</p><p><strong>14.</strong> [was #12; modified] Here’s what the program will look like after preprocessing:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Blank line</span><br><span class="line">Blank line</span><br><span class="line">Blank line</span><br><span class="line">Blank line</span><br><span class="line">Blank line</span><br><span class="line">Blank line</span><br><span class="line">Blank line</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int a[= 10], i, j, k, m;</span><br><span class="line"> </span><br><span class="line">Blank line</span><br><span class="line">  i = j;</span><br><span class="line">Blank line</span><br><span class="line">Blank line</span><br><span class="line">Blank line</span><br><span class="line"> </span><br><span class="line">  i = 10 * j+1;</span><br><span class="line">  i = (x,y) x-y(j, k);</span><br><span class="line">  i = ((((j)*(j)))*(((j)*(j))));</span><br><span class="line">  i = (((j)*(j))*(j));</span><br><span class="line">  i = jk;</span><br><span class="line">  puts("i" "j");</span><br><span class="line"> </span><br><span class="line">Blank line</span><br><span class="line">  i = SQR(j);</span><br><span class="line">Blank line</span><br><span class="line">  i = (j);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>Some preprocessors delete white-space characters at the beginning of a line, so your results may vary. Three lines will cause errors when the program is compiled. Two contain syntax errors:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int a[= 10], i, j, k, m;</span><br><span class="line">i = (x,y) x-y(j, k);</span><br></pre></td></tr></tbody></table></figure><p>The third refers to an undefined variable:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i = jk;</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-15"><a href="#Chapter-15" class="headerlink" title="Chapter 15"></a>Chapter 15</h3><h4 id="Answers-to-Selected-Exercises-10"><a href="#Answers-to-Selected-Exercises-10" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2] (b). Function definitions should not be put in a header file. If a function definition appears in a header file that is included by two (or more) source files, the program can’t be linked, since the linker will see two copies of the function.</p><p><strong>6.</strong> [was #8]</p><p>(a) <code>main.c</code>, <code>f1.c</code>, and <code>f2.c</code>.<br>(b) <code>f1.c</code> (assuming that <code>f1.h</code> is not affected by the change).<br>(c) <code>main.c</code>, <code>f1.c</code>, and <code>f2.c</code>, since all three include <code>f1.h</code>.<br>(d) <code>f1.c</code> and <code>f2.c</code>, since both include <code>f2.h</code>.</p><h3 id="Chapter-16"><a href="#Chapter-16" class="headerlink" title="Chapter 16"></a>Chapter 16</h3><h4 id="Answers-to-Selected-Exercises-11"><a href="#Answers-to-Selected-Exercises-11" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2; modified]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">struct {</span><br><span class="line">  double real, imaginary;</span><br><span class="line">} c1, c2, c3;</span><br></pre></td></tr></tbody></table></figure><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">struct {</span><br><span class="line">  double real, imaginary;</span><br><span class="line">} c1 = {0.0, 1.0}, c2 = {1.0, 0.0}, c3;</span><br></pre></td></tr></tbody></table></figure><p>(c) Only one statement is necessary:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c1 = c2;</span><br></pre></td></tr></tbody></table></figure><p>(d)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c3.real = c1.real + c2.real;</span><br><span class="line">c3.imaginary = c1.imaginary + c2.imaginary;</span><br></pre></td></tr></tbody></table></figure><p><strong>4.</strong> [was #4; modified]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">typedef struct {</span><br><span class="line">  double real, imaginary;</span><br><span class="line">} Complex;</span><br></pre></td></tr></tbody></table></figure><p>(b) <code>Complex c1, c2, c3;</code></p><p>(c)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Complex make_complex(double real, double imaginary)</span><br><span class="line">{</span><br><span class="line">  Complex c;</span><br><span class="line"> </span><br><span class="line">  c.real = real;</span><br><span class="line">  c.imaginary = imaginary;</span><br><span class="line">  return c;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(d)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Complex add_complex(Complex c1, Complex c2)</span><br><span class="line">{</span><br><span class="line">  Complex c3;</span><br><span class="line"> </span><br><span class="line">  c3.real = c1.real + c2.real;</span><br><span class="line">  c3.imaginary = c1.imaginary + c2.imaginary;</span><br><span class="line">  return c3;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>11.</strong> [was #10; modified] The <code>a</code> member will occupy 8 bytes, the union <code>e</code> will take 8 bytes (the largest member, <code>c</code>, is 8 bytes long), and the array <code>f</code> will require 4 bytes, so the total space allocated for <code>s</code> will be 20 bytes.</p><p><strong>14.</strong> [was #12; modified]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">double area(struct shape s)</span><br><span class="line">{</span><br><span class="line">  if (s.shape_kind == RECTANGLE)</span><br><span class="line">    return s.u.rectangle.height * s.u.rectangle.width;</span><br><span class="line">  else</span><br><span class="line">    return 3.14159 * s.u.circle.radius * s.u.circle.radius;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">struct shape move(struct shape s, int x, int y)</span><br><span class="line">{</span><br><span class="line">  struct shape new_shape = s;</span><br><span class="line"> </span><br><span class="line">  new_shape.center.x += x;</span><br><span class="line">  new_shape.center.y += y;</span><br><span class="line">  return new_shape;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(c)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">struct shape scale(struct shape s, double c)</span><br><span class="line">{</span><br><span class="line">  struct shape new_shape = s;</span><br><span class="line"> </span><br><span class="line">  if (new_shape.shape_kind == RECTANGLE) {</span><br><span class="line">    new_shape.u.rectangle.height *= c;</span><br><span class="line">    new_shape.u.rectangle.width *= c;</span><br><span class="line">  } else</span><br><span class="line">    new_shape.u.circle.radius *= c;</span><br><span class="line"> </span><br><span class="line">  return new_shape;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>15.</strong> [was #14]</p><p>(a) <code>enum week_days {MON, TUE, WED, THU, FRI, SAT, SUN};</code><br>(b) <code>typedef enum {MON, TUE, WED, THU, FRI, SAT, SUN} Week_days;</code></p><p><strong>17.</strong> [was #16] All the statements are legal, since C allows integers and enumeration values to be mixed without restriction. Only (a), (d), and (e) are safe. (b) is not meaningful if <code>i</code> has a value other than 0 or 1. (c) will not yield a meaningful result if <code>b</code> has the value 1.</p><h4 id="Answers-to-Selected-Programming-Projects-7"><a href="#Answers-to-Selected-Programming-Projects-7" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>1.</strong> [was #6; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">#define COUNTRY_COUNT \</span><br><span class="line">  ((int) (sizeof(country_codes) / sizeof(country_codes[0])))</span><br><span class="line"> </span><br><span class="line">struct dialing_code {</span><br><span class="line">  char *country;</span><br><span class="line">  int code;</span><br><span class="line">};</span><br><span class="line"> </span><br><span class="line">const struct dialing_code country_codes[] =</span><br><span class="line">  {{"Argentina",            54}, {"Bangladesh",      880},</span><br><span class="line">   {"Brazil",               55}, {"Burma (Myanmar)",  95},</span><br><span class="line">   {"China",                86}, {"Colombia",         57},</span><br><span class="line">   {"Congo, Dem. Rep. of", 243}, {"Egypt",            20},</span><br><span class="line">   {"Ethiopia",            251}, {"France",           33},</span><br><span class="line">   {"Germany",              49}, {"India",            91},</span><br><span class="line">   {"Indonesia",            62}, {"Iran",             98},</span><br><span class="line">   {"Italy",                39}, {"Japan",            81},</span><br><span class="line">   {"Mexico",               52}, {"Nigeria",         234},</span><br><span class="line">   {"Pakistan",             92}, {"Philippines",      63},</span><br><span class="line">   {"Poland",               48}, {"Russia",            7},</span><br><span class="line">   {"South Africa",         27}, {"South Korea",      82},</span><br><span class="line">   {"Spain",                34}, {"Sudan",           249},</span><br><span class="line">   {"Thailand",             66}, {"Turkey",           90},</span><br><span class="line">   {"Ukraine",             380}, {"United Kingdom",   44},</span><br><span class="line">   {"United States",         1}, {"Vietnam",          84}};</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int code, i;</span><br><span class="line"> </span><br><span class="line">  printf("Enter dialing code: ");</span><br><span class="line">  scanf("%d", &amp;code);</span><br><span class="line"> </span><br><span class="line">  for (i = 0; i &lt; COUNTRY_COUNT; i++)</span><br><span class="line">    if (code == country_codes[i].code) {</span><br><span class="line">      printf("The country with dialing code %d is %s\n",</span><br><span class="line">             code, country_codes[i].country);</span><br><span class="line">      return 0;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">  printf("No corresponding country found\n");</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>3.</strong> [was #8]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include "readline.h"</span><br><span class="line"> </span><br><span class="line">#define NAME_LEN 25</span><br><span class="line">#define MAX_PARTS 100</span><br><span class="line"> </span><br><span class="line">struct part {</span><br><span class="line">  int number;</span><br><span class="line">  char name[NAME_LEN+1];</span><br><span class="line">  int on_hand;</span><br><span class="line">};</span><br><span class="line"> </span><br><span class="line">int find_part(int number, const struct part inv[], int np);</span><br><span class="line">void insert(struct part inv[], int *np);</span><br><span class="line">void search(const struct part inv[], int np);</span><br><span class="line">void update(struct part inv[], int np);</span><br><span class="line">void print(const struct part inv[], int np);</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * main: Prompts the user to enter an operation code,     *</span><br><span class="line"> *       then calls a function to perform the requested   *</span><br><span class="line"> *       action. Repeats until the user enters the        *</span><br><span class="line"> *       command 'q'. Prints an error message if the user *</span><br><span class="line"> *       enters an illegal code.                          *</span><br><span class="line"> **********************************************************/</span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  char code;</span><br><span class="line">  struct part inventory[MAX_PARTS];</span><br><span class="line">  int num_parts = 0;</span><br><span class="line"> </span><br><span class="line">  for (;;) {</span><br><span class="line">    printf("Enter operation code: ");</span><br><span class="line">    scanf(" %c", &amp;code);</span><br><span class="line">    while (getchar() != '\n')   /* skips to end of line */</span><br><span class="line">      ;</span><br><span class="line">    switch (code) {</span><br><span class="line">      case 'i': insert(inventory, &amp;num_parts);</span><br><span class="line">                break;</span><br><span class="line">      case 's': search(inventory, num_parts);</span><br><span class="line">                break;</span><br><span class="line">      case 'u': update(inventory, num_parts);</span><br><span class="line">                break;</span><br><span class="line">      case 'p': print(inventory, num_parts);</span><br><span class="line">                break;</span><br><span class="line">      case 'q': return 0;</span><br><span class="line">      default:  printf("Illegal code\n");</span><br><span class="line">    }</span><br><span class="line">    printf("\n");</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * find_part: Looks up a part number in the inv array.    *</span><br><span class="line"> *            Returns the array index if the part number  *</span><br><span class="line"> *            is found; otherwise, returns -1.            *</span><br><span class="line"> **********************************************************/</span><br><span class="line">int find_part(int number, const struct part inv[], int np)</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; i &lt; np; i++)</span><br><span class="line">    if (inv[i].number == number)</span><br><span class="line">      return i;</span><br><span class="line">  return -1;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * insert: Prompts the user for information about a new   *</span><br><span class="line"> *         part and then inserts the part into the inv    *</span><br><span class="line"> *         array. Prints an error message and returns     *</span><br><span class="line"> *         prematurely if the part already exists or the  *</span><br><span class="line"> *         array is full.                                 *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void insert(struct part inv[], int *np)</span><br><span class="line">{</span><br><span class="line">  int part_number;</span><br><span class="line"> </span><br><span class="line">  if (*np == MAX_PARTS) {</span><br><span class="line">    printf("Database is full; can't add more parts.\n");</span><br><span class="line">    return;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("Enter part number: ");</span><br><span class="line">  scanf("%d", &amp;part_number);</span><br><span class="line">  if (find_part(part_number, inv, *np) &gt;= 0) {</span><br><span class="line">    printf("Part already exists.\n");</span><br><span class="line">    return;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  inv[*np].number = part_number;</span><br><span class="line">  printf("Enter part name: ");</span><br><span class="line">  read_line(inv[*np].name, NAME_LEN);</span><br><span class="line">  printf("Enter quantity on hand: ");</span><br><span class="line">  scanf("%d", &amp;inv[*np].on_hand);</span><br><span class="line">  (*np)++;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * search: Prompts the user to enter a part number, then  *</span><br><span class="line"> *         looks up the part in the inv array. If the     *</span><br><span class="line"> *         part exists, prints the name and quantity on   *</span><br><span class="line"> *         hand; if not, prints an error message.         *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void search(const struct part inv[], int np)</span><br><span class="line">{</span><br><span class="line">  int i, number;</span><br><span class="line"> </span><br><span class="line">  printf("Enter part number: ");</span><br><span class="line">  scanf("%d", &amp;number);</span><br><span class="line">  i = find_part(number, inv, np);</span><br><span class="line">  if (i &gt;= 0) {</span><br><span class="line">    printf("Part name: %s\n", inv[i].name);</span><br><span class="line">    printf("Quantity on hand: %d\n", inv[i].on_hand);</span><br><span class="line">  } else</span><br><span class="line">    printf("Part not found.\n");</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * update: Prompts the user to enter a part number.       *</span><br><span class="line"> *         Prints an error message if the part can't be   *</span><br><span class="line"> *         found in the inv array; otherwise, prompts the *</span><br><span class="line"> *         user to enter change in quantity on hand and   *</span><br><span class="line"> *         updates the array.                             *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void update(struct part inv[], int np)</span><br><span class="line">{</span><br><span class="line">  int i, number, change;</span><br><span class="line"> </span><br><span class="line">  printf("Enter part number: ");</span><br><span class="line">  scanf("%d", &amp;number);</span><br><span class="line">  i = find_part(number, inv, np);</span><br><span class="line">  if (i &gt;= 0) {</span><br><span class="line">    printf("Enter change in quantity on hand: ");</span><br><span class="line">    scanf("%d", &amp;change);</span><br><span class="line">    inv[i].on_hand += change;</span><br><span class="line">  } else</span><br><span class="line">    printf("Part not found.\n");</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * print: Prints a listing of all parts in the inv array, *</span><br><span class="line"> *        showing the part number, part name, and         *</span><br><span class="line"> *        quantity on hand. Parts are printed in the      *</span><br><span class="line"> *        order in which they were entered into the       *</span><br><span class="line"> *        array.                                          *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void print(const struct part inv[], int np)</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  printf("Part Number   Part Name                  "</span><br><span class="line">         "Quantity on Hand\n");</span><br><span class="line">  for (i = 0; i &lt; np; i++)</span><br><span class="line">    printf("%7d       %-25s%11d\n", inv[i].number,</span><br><span class="line">           inv[i].name, inv[i].on_hand);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-17"><a href="#Chapter-17" class="headerlink" title="Chapter 17"></a>Chapter 17</h3><h4 id="Answers-to-Selected-Exercises-12"><a href="#Answers-to-Selected-Exercises-12" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">char *duplicate(const char *s)</span><br><span class="line">{</span><br><span class="line">  char *temp = malloc(strlen(s) + 1);</span><br><span class="line"> </span><br><span class="line">  if (temp == NULL)</span><br><span class="line">    return NULL;</span><br><span class="line"> </span><br><span class="line">  strcpy(temp, s);</span><br><span class="line">  return temp;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>5.</strong> [was #6] (b) and (c) are legal. (a) is illegal because it tries to reference a member of <code>d</code> without mentioning <code>d</code>. (d) is illegal because it uses <code>-&gt;</code> instead of <code>.</code> to reference the <code>c</code> member of <code>d</code>.</p><p><strong>7.</strong> [was #8] The first call of <code>free</code> will release the space for the first node in the list, making <code>p</code> a dangling pointer. Executing <code>p</code> <code>=</code> <code>p-&gt;next</code> to advance to the next node will have an undefined effect. Here’s a correct way to write the loop, using a temporary pointer that points to the node being deleted:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">struct node *temp;</span><br><span class="line"> </span><br><span class="line">p = first;</span><br><span class="line">while (p != NULL) {</span><br><span class="line">  temp = p;</span><br><span class="line">  p = p-&gt;next;</span><br><span class="line">  free(temp);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>8.</strong> [was #10; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdbool.h&gt;   /* C99 only */</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include "stack.h"</span><br><span class="line"> </span><br><span class="line">struct node {</span><br><span class="line">  int value;</span><br><span class="line">  struct node *next;</span><br><span class="line">};</span><br><span class="line"> </span><br><span class="line">struct node *top = NULL;</span><br><span class="line"> </span><br><span class="line">void make_empty(void)</span><br><span class="line">{</span><br><span class="line">  struct node *temp;</span><br><span class="line"> </span><br><span class="line">  while (top != NULL) {</span><br><span class="line">    temp = top;</span><br><span class="line">    top = top-&gt;next;</span><br><span class="line">    free(temp);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">bool is_empty(void)</span><br><span class="line">{</span><br><span class="line">  return top == NULL;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">bool push(int i)</span><br><span class="line">{</span><br><span class="line">  struct node *new_node;</span><br><span class="line"> </span><br><span class="line">  new_node = malloc(sizeof(struct node));</span><br><span class="line">  if (new_node == NULL)</span><br><span class="line">    return false;</span><br><span class="line"> </span><br><span class="line">  new_node-&gt;value = i;</span><br><span class="line">  new_node-&gt;next = top;</span><br><span class="line">  top = new_node;</span><br><span class="line"> </span><br><span class="line">  return true;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">int pop(void)</span><br><span class="line">{</span><br><span class="line">  struct node *temp;</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  if (is_empty()) {</span><br><span class="line">    printf("*** Stack underflow; program terminated. ***\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  i = top-&gt;value;</span><br><span class="line">  temp = top;</span><br><span class="line">  top = top-&gt;next;</span><br><span class="line">  free(temp);</span><br><span class="line"> </span><br><span class="line">  return i;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>15.</strong> [was #12] The output of the program is</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Answer: 3</span><br></pre></td></tr></tbody></table></figure><p>The program tests the values of <code>f2(0)</code>, <code>f2(1)</code>, <code>f2(2)</code>, and so on, stopping when <code>f2</code> returns zero. It then prints the argument that was passed to <code>f2</code> to make it return zero.</p><p><strong>17.</strong> [was #14] Assuming that <code>compare</code> is the name of the comparison function, the following call of <code>qsort</code> will sort the last 50 elements of <code>a</code>:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qsort(&amp;a[50], 50, sizeof(a[0]), compare);</span><br></pre></td></tr></tbody></table></figure><h4 id="Answers-to-Selected-Programming-Projects-8"><a href="#Answers-to-Selected-Programming-Projects-8" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>1.</strong> [was #4]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include "readline.h"</span><br><span class="line"> </span><br><span class="line">#define NAME_LEN 25</span><br><span class="line">#define INITIAL_PARTS 10</span><br><span class="line"> </span><br><span class="line">struct part {</span><br><span class="line">  int number;</span><br><span class="line">  char name[NAME_LEN+1];</span><br><span class="line">  int on_hand;</span><br><span class="line">};</span><br><span class="line"> </span><br><span class="line">struct part *inventory;</span><br><span class="line">int num_parts = 0;      /* number of parts currently stored */</span><br><span class="line">int max_parts = INITIAL_PARTS;   /* size of inventory array */</span><br><span class="line"> </span><br><span class="line">int find_part(int number);</span><br><span class="line">void insert(void);</span><br><span class="line">void search(void);</span><br><span class="line">void update(void);</span><br><span class="line">void print(void);</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * main: Prompts the user to enter an operation code,     *</span><br><span class="line"> *       then calls a function to perform the requested   *</span><br><span class="line"> *       action. Repeats until the user enters the        *</span><br><span class="line"> *       command 'q'. Prints an error message if the user *</span><br><span class="line"> *       enters an illegal code.                          *</span><br><span class="line"> **********************************************************/</span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  char code;</span><br><span class="line"> </span><br><span class="line">  inventory = malloc(max_parts * sizeof(struct part));</span><br><span class="line">  if (inventory == NULL) {</span><br><span class="line">    printf("Can't allocate initial inventory space.\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  for (;;) {</span><br><span class="line">    printf("Enter operation code: ");</span><br><span class="line">    scanf(" %c", &amp;code);</span><br><span class="line">    while (getchar() != '\n')   /* skips to end of line */</span><br><span class="line">      ;</span><br><span class="line">    switch (code) {</span><br><span class="line">      case 'i': insert();</span><br><span class="line">                break;</span><br><span class="line">      case 's': search();</span><br><span class="line">                break;</span><br><span class="line">      case 'u': update();</span><br><span class="line">                break;</span><br><span class="line">      case 'p': print();</span><br><span class="line">                break;</span><br><span class="line">      case 'q': return 0;</span><br><span class="line">      default:  printf("Illegal code\n");</span><br><span class="line">    }</span><br><span class="line">    printf("\n");</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * find_part: Looks up a part number in the inventory     *</span><br><span class="line"> *            array. Returns the array index if the part  *</span><br><span class="line"> *            number is found; otherwise, returns -1.     *</span><br><span class="line"> **********************************************************/</span><br><span class="line">int find_part(int number)</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; i &lt; num_parts; i++)</span><br><span class="line">    if (inventory[i].number == number)</span><br><span class="line">      return i;</span><br><span class="line">  return -1;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * insert: Prompts the user for information about a new   *</span><br><span class="line"> *         part and then inserts the part into the        *</span><br><span class="line"> *         database. Prints an error message and returns  *</span><br><span class="line"> *         prematurely if the part already exists or the  *</span><br><span class="line"> *         database is full.                              *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void insert(void)</span><br><span class="line">{</span><br><span class="line">  int part_number;</span><br><span class="line">  struct part *temp;</span><br><span class="line"> </span><br><span class="line">  if (num_parts == max_parts) {</span><br><span class="line">    max_parts *= 2;</span><br><span class="line">    temp = realloc(inventory, max_parts * sizeof(struct part));</span><br><span class="line">    if (temp == NULL) {</span><br><span class="line">      printf("Insufficient memory; can't add more parts.\n");</span><br><span class="line">      return;</span><br><span class="line">    }</span><br><span class="line">    inventory = temp;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("Enter part number: ");</span><br><span class="line">  scanf("%d", &amp;part_number);</span><br><span class="line">  if (find_part(part_number) &gt;= 0) {</span><br><span class="line">    printf("Part already exists.\n");</span><br><span class="line">    return;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  inventory[num_parts].number = part_number;</span><br><span class="line">  printf("Enter part name: ");</span><br><span class="line">  read_line(inventory[num_parts].name, NAME_LEN);</span><br><span class="line">  printf("Enter quantity on hand: ");</span><br><span class="line">  scanf("%d", &amp;inventory[num_parts].on_hand);</span><br><span class="line">  num_parts++;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * search: Prompts the user to enter a part number, then  *</span><br><span class="line"> *         looks up the part in the database. If the part *</span><br><span class="line"> *         exists, prints the name and quantity on hand;  *</span><br><span class="line"> *         if not, prints an error message.               *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void search(void)</span><br><span class="line">{</span><br><span class="line">  int i, number;</span><br><span class="line"> </span><br><span class="line">  printf("Enter part number: ");</span><br><span class="line">  scanf("%d", &amp;number);</span><br><span class="line">  i = find_part(number);</span><br><span class="line">  if (i &gt;= 0) {</span><br><span class="line">    printf("Part name: %s\n", inventory[i].name);</span><br><span class="line">    printf("Quantity on hand: %d\n", inventory[i].on_hand);</span><br><span class="line">  } else</span><br><span class="line">    printf("Part not found.\n");</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * update: Prompts the user to enter a part number.       *</span><br><span class="line"> *         Prints an error message if the part doesn't    *</span><br><span class="line"> *         exist; otherwise, prompts the user to enter    *</span><br><span class="line"> *         change in quantity on hand and updates the     *</span><br><span class="line"> *         database.                                      *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void update(void)</span><br><span class="line">{</span><br><span class="line">  int i, number, change;</span><br><span class="line"> </span><br><span class="line">  printf("Enter part number: ");</span><br><span class="line">  scanf("%d", &amp;number);</span><br><span class="line">  i = find_part(number);</span><br><span class="line">  if (i &gt;= 0) {</span><br><span class="line">    printf("Enter change in quantity on hand: ");</span><br><span class="line">    scanf("%d", &amp;change);</span><br><span class="line">    inventory[i].on_hand += change;</span><br><span class="line">  } else</span><br><span class="line">    printf("Part not found.\n");</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * print: Prints a listing of all parts in the database,  *</span><br><span class="line"> *        showing the part number, part name, and         *</span><br><span class="line"> *        quantity on hand. Parts are printed in the      *</span><br><span class="line"> *        order in which they were entered into the       *</span><br><span class="line"> *        database.                                       *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void print(void)</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  printf("Part Number   Part Name                  "</span><br><span class="line">         "Quantity on Hand\n");</span><br><span class="line">  for (i = 0; i &lt; num_parts; i++)</span><br><span class="line">    printf("%7d       %-25s%11d\n", inventory[i].number,</span><br><span class="line">           inventory[i].name, inventory[i].on_hand);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>2.</strong> [was #16]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include "readline.h"</span><br><span class="line"> </span><br><span class="line">#define NAME_LEN 25</span><br><span class="line">#define MAX_PARTS 100</span><br><span class="line"> </span><br><span class="line">struct part {</span><br><span class="line">  int number;</span><br><span class="line">  char name[NAME_LEN+1];</span><br><span class="line">  int on_hand;</span><br><span class="line">} inventory[MAX_PARTS];</span><br><span class="line"> </span><br><span class="line">int num_parts = 0;   /* number of parts currently stored */</span><br><span class="line"> </span><br><span class="line">int find_part(int number);</span><br><span class="line">void insert(void);</span><br><span class="line">void search(void);</span><br><span class="line">void update(void);</span><br><span class="line">void print(void);</span><br><span class="line">int compare_parts(const void *p, const void *q);</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * main: Prompts the user to enter an operation code,     *</span><br><span class="line"> *       then calls a function to perform the requested   *</span><br><span class="line"> *       action. Repeats until the user enters the        *</span><br><span class="line"> *       command 'q'. Prints an error message if the user *</span><br><span class="line"> *       enters an illegal code.                          *</span><br><span class="line"> **********************************************************/</span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  char code;</span><br><span class="line"> </span><br><span class="line">  for (;;) {</span><br><span class="line">    printf("Enter operation code: ");</span><br><span class="line">    scanf(" %c", &amp;code);</span><br><span class="line">    while (getchar() != '\n')   /* skips to end of line */</span><br><span class="line">      ;</span><br><span class="line">    switch (code) {</span><br><span class="line">      case 'i': insert();</span><br><span class="line">                break;</span><br><span class="line">      case 's': search();</span><br><span class="line">                break;</span><br><span class="line">      case 'u': update();</span><br><span class="line">                break;</span><br><span class="line">      case 'p': print();</span><br><span class="line">                break;</span><br><span class="line">      case 'q': return 0;</span><br><span class="line">      default:  printf("Illegal code\n");</span><br><span class="line">    }</span><br><span class="line">    printf("\n");</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * find_part: Looks up a part number in the inventory     *</span><br><span class="line"> *            array. Returns the array index if the part  *</span><br><span class="line"> *            number is found; otherwise, returns -1.     *</span><br><span class="line"> **********************************************************/</span><br><span class="line">int find_part(int number)</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; i &lt; num_parts; i++)</span><br><span class="line">    if (inventory[i].number == number)</span><br><span class="line">      return i;</span><br><span class="line">  return -1;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * insert: Prompts the user for information about a new   *</span><br><span class="line"> *         part and then inserts the part into the        *</span><br><span class="line"> *         database. Prints an error message and returns  *</span><br><span class="line"> *         prematurely if the part already exists or the  *</span><br><span class="line"> *         database is full.                              *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void insert(void)</span><br><span class="line">{</span><br><span class="line">  int part_number;</span><br><span class="line"> </span><br><span class="line">  if (num_parts == MAX_PARTS) {</span><br><span class="line">    printf("Database is full; can't add more parts.\n");</span><br><span class="line">    return;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("Enter part number: ");</span><br><span class="line">  scanf("%d", &amp;part_number);</span><br><span class="line">  if (find_part(part_number) &gt;= 0) {</span><br><span class="line">    printf("Part already exists.\n");</span><br><span class="line">    return;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  inventory[num_parts].number = part_number;</span><br><span class="line">  printf("Enter part name: ");</span><br><span class="line">  read_line(inventory[num_parts].name, NAME_LEN);</span><br><span class="line">  printf("Enter quantity on hand: ");</span><br><span class="line">  scanf("%d", &amp;inventory[num_parts].on_hand);</span><br><span class="line">  num_parts++;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * search: Prompts the user to enter a part number, then  *</span><br><span class="line"> *         looks up the part in the database. If the part *</span><br><span class="line"> *         exists, prints the name and quantity on hand;  *</span><br><span class="line"> *         if not, prints an error message.               *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void search(void)</span><br><span class="line">{</span><br><span class="line">  int i, number;</span><br><span class="line"> </span><br><span class="line">  printf("Enter part number: ");</span><br><span class="line">  scanf("%d", &amp;number);</span><br><span class="line">  i = find_part(number);</span><br><span class="line">  if (i &gt;= 0) {</span><br><span class="line">    printf("Part name: %s\n", inventory[i].name);</span><br><span class="line">    printf("Quantity on hand: %d\n", inventory[i].on_hand);</span><br><span class="line">  } else</span><br><span class="line">    printf("Part not found.\n");</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * update: Prompts the user to enter a part number.       *</span><br><span class="line"> *         Prints an error message if the part doesn't    *</span><br><span class="line"> *         exist; otherwise, prompts the user to enter    *</span><br><span class="line"> *         change in quantity on hand and updates the     *</span><br><span class="line"> *         database.                                      *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void update(void)</span><br><span class="line">{</span><br><span class="line">  int i, number, change;</span><br><span class="line"> </span><br><span class="line">  printf("Enter part number: ");</span><br><span class="line">  scanf("%d", &amp;number);</span><br><span class="line">  i = find_part(number);</span><br><span class="line">  if (i &gt;= 0) {</span><br><span class="line">    printf("Enter change in quantity on hand: ");</span><br><span class="line">    scanf("%d", &amp;change);</span><br><span class="line">    inventory[i].on_hand += change;</span><br><span class="line">  } else</span><br><span class="line">    printf("Part not found.\n");</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**********************************************************</span><br><span class="line"> * print: Sorts the inventory array by part number, then  *</span><br><span class="line"> *        prints a listing of all parts in the database,  *</span><br><span class="line"> *        showing the part number, part name, and         *</span><br><span class="line"> *        quantity on hand.                               *</span><br><span class="line"> **********************************************************/</span><br><span class="line">void print(void)</span><br><span class="line">{</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  qsort(inventory, num_parts, sizeof(struct part), compare_parts);</span><br><span class="line">  printf("Part Number   Part Name                  "</span><br><span class="line">         "Quantity on Hand\n");</span><br><span class="line">  for (i = 0; i &lt; num_parts; i++)</span><br><span class="line">    printf("%7d       %-25s%11d\n", inventory[i].number,</span><br><span class="line">           inventory[i].name, inventory[i].on_hand);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">int compare_parts(const void *p, const void *q)</span><br><span class="line">{</span><br><span class="line">  return ((struct part *) p)-&gt;number - ((struct part *) q)-&gt;number;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-18"><a href="#Chapter-18" class="headerlink" title="Chapter 18"></a>Chapter 18</h3><h4 id="Answers-to-Selected-Exercises-13"><a href="#Answers-to-Selected-Exercises-13" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2]</p><p>(a) <code>extern</code><br>(b) <code>static</code><br>(c) <code>extern</code> and <code>static</code> (when applied to a local variable)</p><p><strong>4.</strong> [was #4] If <code>f</code> has never been called previously, the value of <code>f(10)</code> will be 0. If <code>f</code> has been called five times previously, the value of <code>f(10)</code> will be 50, since <code>j</code> is incremented once per call.</p><p><strong>8.</strong> [was #6; modified]</p><p>(a) <code>x</code> is an array of ten pointers to functions. Each function takes an <code>int</code> argument and returns a character.<br>(b) <code>x</code> is a function that returns a pointer to an array of five integers.<br>(c) <code>x</code> is a function with no arguments that returns a pointer to a function with an <code>int</code> argument that returns a pointer to a <code>float</code> value.<br>(d) <code>x</code> is a function with two arguments. The first argument is an integer, and the second is a pointer to a function with an <code>int</code> argument and no return value. <code>x</code> returns a pointer to a function with an <code>int</code> argument and no return value. (Although this example may seem artificially complex, the <code>signal</code> function—part of the standard C library—has exactly this prototype. See p. 632 for a discussion of <code>signal</code>.)</p><p><strong>10.</strong> [was #8]</p><p>(a) <code>char *(*p)(char *);</code><br>(b) <code>void *f(struct t *p, long int n)(void);</code><br>(c) <code>void (*a[])(void) = {insert, search, update, print};</code><br>(d) <code>struct t (*b[10])(int, int);</code></p><p><strong>13.</strong> [was #10] (a), (c), and (d) are legal. (b) is illegal; the initializer for a variable with static storage duration must be a constant expression, and <code>i</code> <code>*</code> <code>i</code> doesn’t qualify.</p><p><strong>15.</strong> [was #12] (a). Variables with static storage duration are initialized to zero by default; variables with automatic storage duration have no default initial value.</p><h3 id="Chapter-19"><a href="#Chapter-19" class="headerlink" title="Chapter 19"></a>Chapter 19</h3><h4 id="Answers-to-Selected-Exercises-14"><a href="#Answers-to-Selected-Exercises-14" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include "stack.h"</span><br><span class="line"> </span><br><span class="line">#define PUBLIC  /* empty */</span><br><span class="line">#define PRIVATE static</span><br><span class="line"> </span><br><span class="line">struct node {</span><br><span class="line">  int data;</span><br><span class="line">  struct node *next;</span><br><span class="line">};</span><br><span class="line"> </span><br><span class="line">PRIVATE struct node *top = NULL;</span><br><span class="line"> </span><br><span class="line">PRIVATE void terminate(const char *message)</span><br><span class="line">{</span><br><span class="line">  printf("%s\n", message);</span><br><span class="line">  exit(EXIT_FAILURE);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">PUBLIC void make_empty(void)</span><br><span class="line">{</span><br><span class="line">  while (!is_empty())</span><br><span class="line">    pop();</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">PUBLIC bool is_empty(void)</span><br><span class="line">{</span><br><span class="line">  return top == NULL;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">PUBLIC bool is_full(void)</span><br><span class="line">{</span><br><span class="line">  return false;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">PUBLIC void push(int i)</span><br><span class="line">{</span><br><span class="line">  struct node *new_node = malloc(sizeof(struct node));</span><br><span class="line">  if (new_node == NULL)</span><br><span class="line">    terminate("Error in push: stack is full.");</span><br><span class="line"> </span><br><span class="line">  new_node-&gt;data = i;</span><br><span class="line">  new_node-&gt;next = top;</span><br><span class="line">  top = new_node;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">PUBLIC int pop(void)</span><br><span class="line">{</span><br><span class="line">  struct node *old_top;</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  if (is_empty())</span><br><span class="line">    terminate("Error in pop: stack is empty.");</span><br><span class="line"> </span><br><span class="line">  old_top = top;</span><br><span class="line">  i = top-&gt;data;</span><br><span class="line">  top = top-&gt;next;</span><br><span class="line">  free(old_top);</span><br><span class="line">  return i;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>4.</strong> [was #4; modified]</p><p>(a) Contents of <code>stack.c</code> file:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include "stack.h"</span><br><span class="line"> </span><br><span class="line">static void terminate(const char *message)</span><br><span class="line">{</span><br><span class="line">  printf("%s\n", message);</span><br><span class="line">  exit(EXIT_FAILURE);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">void make_empty(Stack *s)</span><br><span class="line">{</span><br><span class="line">  s-&gt;top = 0;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">bool is_empty(const Stack *s)</span><br><span class="line">{</span><br><span class="line">  return s-&gt;top == 0;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">bool is_full(const Stack *s)</span><br><span class="line">{</span><br><span class="line">  return s-&gt;top == STACK_SIZE;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">void push(Stack *s, int i)</span><br><span class="line">{</span><br><span class="line">  if (is_full(s))</span><br><span class="line">    terminate("Error in push: stack is full.");</span><br><span class="line">  s-&gt;contents[s-&gt;top++] = i;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">int pop(Stack *s)</span><br><span class="line">{</span><br><span class="line">  if (is_empty(s))</span><br><span class="line">    terminate("Error in pop: stack is empty.");</span><br><span class="line">  return s-&gt;contents[--s-&gt;top];</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b) Contents of <code>stack.h</code> file:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#ifndef STACK_H</span><br><span class="line">#define STACK_H</span><br><span class="line"> </span><br><span class="line">#include &lt;stdbool.h&gt;   /* C99 only */</span><br><span class="line"> </span><br><span class="line">struct node {</span><br><span class="line">  int data;</span><br><span class="line">  struct node *next;</span><br><span class="line">};</span><br><span class="line"> </span><br><span class="line">typedef struct node *Stack;</span><br><span class="line"> </span><br><span class="line">void make_empty(Stack *s);</span><br><span class="line">bool is_empty(const Stack *s);</span><br><span class="line">bool is_full(const Stack *s);</span><br><span class="line">void push(Stack *s, int i);</span><br><span class="line">int pop(Stack *s);</span><br><span class="line"> </span><br><span class="line">#endif</span><br></pre></td></tr></tbody></table></figure><p>Contents of <code>stack.c</code> file:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include "stack.h"</span><br><span class="line"> </span><br><span class="line">static void terminate(const char *message)</span><br><span class="line">{</span><br><span class="line">  printf("%s\n", message);</span><br><span class="line">  exit(EXIT_FAILURE);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">void make_empty(Stack *s)</span><br><span class="line">{</span><br><span class="line">  while (!is_empty(s))</span><br><span class="line">    pop(s);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">bool is_empty(const Stack *s)</span><br><span class="line">{</span><br><span class="line">  return *s == NULL;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">bool is_full(const Stack *s)</span><br><span class="line">{</span><br><span class="line">  return false;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">void push(Stack *s, int i)</span><br><span class="line">{</span><br><span class="line">  struct node *new_node = malloc(sizeof(struct node));</span><br><span class="line">  if (new_node == NULL)</span><br><span class="line">    terminate("Error in push: stack is full.");</span><br><span class="line"> </span><br><span class="line">  new_node-&gt;data = i;</span><br><span class="line">  new_node-&gt;next = *s;</span><br><span class="line">  *s = new_node;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">int pop(Stack *s)</span><br><span class="line">{</span><br><span class="line">  struct node *old_top;</span><br><span class="line">  int i;</span><br><span class="line"> </span><br><span class="line">  if (is_empty(s))</span><br><span class="line">    terminate("Error in pop: stack is empty.");</span><br><span class="line"> </span><br><span class="line">  old_top = *s;</span><br><span class="line">  i = (*s)-&gt;data;</span><br><span class="line">  *s = (*s)-&gt;next;</span><br><span class="line">  free(old_top);</span><br><span class="line">  return i;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-20"><a href="#Chapter-20" class="headerlink" title="Chapter 20"></a>Chapter 20</h3><h4 id="Answers-to-Selected-Exercises-15"><a href="#Answers-to-Selected-Exercises-15" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2] To toggle a bit in a variable <code>i</code>, apply the exclusive-or operator (<code>^</code>) to <code>i</code> and a mask with a 1 bit in the desired position, then store the result back into <code>i</code>. To toggle bit 4, for example, use the statement</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i = i ^ 0x0010;</span><br></pre></td></tr></tbody></table></figure><p>or, more concisely,</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i ^= 0x0010;</span><br></pre></td></tr></tbody></table></figure><p><strong>4.</strong> [was #4] ``</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define MK_COLOR(r,g,b) ((long) (b) &lt;&lt; 16 | (g) &lt;&lt; 8 | (r))</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #6; modified]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">unsigned short swap_bytes(unsigned short i);</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  unsigned short i;</span><br><span class="line"> </span><br><span class="line">  printf("Enter a hexadecimal number (up to four digits): ");</span><br><span class="line">  scanf("%hx", &amp;i);</span><br><span class="line">  printf("Number with bytes swapped: %hx\n", swap_bytes(i));</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">unsigned short swap_bytes(unsigned short i)</span><br><span class="line">{</span><br><span class="line">  unsigned short high_byte = i &lt;&lt; 8;</span><br><span class="line">  unsigned short low_byte = i &gt;&gt; 8;</span><br><span class="line"> </span><br><span class="line">  return high_byte | low_byte;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">unsigned short swap_bytes(unsigned short i)</span><br><span class="line">{</span><br><span class="line">  return i &lt;&lt; 8 | i &gt;&gt; 8;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>8.</strong> [was #8]</p><p>(a) The value of <code>~0</code> is a number containing all 1 bits. Shifting this number to the left by <code>n</code> places yields a result of the form 1…10…0, where there are <code>n</code> 0 bits. Applying the <code>~</code> operator to that number yields a result of the form 0…01…1, where there are <code>n</code> 1 bits.</p><p>(b) It returns a bit-field within <code>i</code> of length <code>n</code> starting at position <code>m</code>. Positions are assumed to be numbered starting from the rightmost bit, which is position 0.</p><p><strong>14.</strong> [was #9]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">struct IEEE_float {</span><br><span class="line">  unsigned int fraction: 23;   /* members may need to be reversed */</span><br><span class="line">  unsigned int exponent: 8;</span><br><span class="line">  unsigned int sign: 1;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-21"><a href="#Chapter-21" class="headerlink" title="Chapter 21"></a>Chapter 21</h3><h4 id="Answers-to-Selected-Exercises-16"><a href="#Answers-to-Selected-Exercises-16" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>7.</strong> [was #4]</p><p>(a) <code>&lt;time.h&gt;</code><br>(b) <code>&lt;ctype.h&gt;</code><br>(c) <code>&lt;limits.h&gt;</code><br>(d) <code>&lt;math.h&gt;</code><br>(e) <code>&lt;limits.h&gt;</code><br>(f) <code>&lt;float.h&gt;</code><br>(g) <code>&lt;string.h&gt;</code><br>(h) <code>&lt;stdio.h&gt;</code></p><h3 id="Chapter-22"><a href="#Chapter-22" class="headerlink" title="Chapter 22"></a>Chapter 22</h3><h4 id="Answers-to-Selected-Exercises-17"><a href="#Answers-to-Selected-Exercises-17" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2]</p><p>(a) <code>"rb+"</code><br>(b) <code>"a"</code><br>(c) <code>"rb"</code><br>(d) <code>"r"</code></p><p><strong>4.</strong> [was #4]</p><p>(a) <code>00000083.736</code><br>(b) <code>00000029749.</code><br>(c) <code>001.0549e+09</code><br>(d) <code>002.3522e-05</code></p><p><strong>6.</strong> [was #6] <code>printf(widget == 1 ? "%d widget" : "%d widgets", widget);</code></p><p><strong>8.</strong> [was #8] No. The difference is that <code>"%1s"</code> will store a null character after it reads and stores a nonblank character; <code>" %c"</code> will store only the nonblank character. As a result, the two format strings must be used differently:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">char c, s[2];</span><br><span class="line"> </span><br><span class="line">scanf(" %c", &amp;c);  /* stores a nonblank character into c */</span><br><span class="line">scanf("%1s", s);   /* stores a nonblank character into s[0]</span><br><span class="line">                      and a null character into s[1] */</span><br><span class="line"> </span><br></pre></td></tr></tbody></table></figure><p><strong>10.</strong> [was #10] Revise the program’s <code>while</code> loop as follows:</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while ((ch = getc(source_fp)) != EOF)</span><br><span class="line">  if (putc(ch, dest_fp) == EOF) {</span><br><span class="line">    fprintf(stderr, "Error during writing; copy terminated\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure><p><strong>14.</strong> [was #18]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">char *fget_string(char *s, int n, FILE *stream)</span><br><span class="line">{</span><br><span class="line">  int ch, len = 0;</span><br><span class="line"> </span><br><span class="line">  while (len &lt; n - 1) {</span><br><span class="line">    if ((ch = getc(stream)) == EOF) {</span><br><span class="line">      if (len == 0 || ferror(stream))</span><br><span class="line">        return NULL;</span><br><span class="line">      break;</span><br><span class="line">    }</span><br><span class="line">    s[len++] = ch;</span><br><span class="line">    if (ch == '\n')</span><br><span class="line">      break;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  s[len] = '\0';</span><br><span class="line">  return s;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int fput_string(const char *s, FILE *stream)</span><br><span class="line">{</span><br><span class="line">  while (*s != '\0') {</span><br><span class="line">    if (putc(*s, stream) == EOF)</span><br><span class="line">      return EOF;</span><br><span class="line">    s++;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>15.</strong> [was #22]</p><p>(a) <code>fseek(fp, n * 64L, SEEK_SET);</code><br>(b) <code>fseek(fp, -64L, SEEK_END);</code><br>(c) <code>fseek(fp, 64L, SEEK_CUR);</code><br>(d) <code>fseek(fp, -128L, SEEK_CUR);</code></p><h4 id="Answers-to-Selected-Programming-Projects-9"><a href="#Answers-to-Selected-Programming-Projects-9" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>2.</strong> [was #12]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;ctype.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">{</span><br><span class="line">  FILE *fp;</span><br><span class="line">  int ch;</span><br><span class="line"> </span><br><span class="line">  if (argc != 2) {</span><br><span class="line">    fprintf(stderr, "usage: toupper file\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  if ((fp = fopen(argv[1], "r")) == NULL) {</span><br><span class="line">    fprintf(stderr, "Can't open %s\n", argv[1]);</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  while ((ch = getc(fp)) != EOF)</span><br><span class="line">    putchar(toupper(ch));</span><br><span class="line"> </span><br><span class="line">  fclose(fp);</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>4.</strong> [was #14]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">{</span><br><span class="line">  FILE *fp;</span><br><span class="line">  int count = 0;</span><br><span class="line"> </span><br><span class="line">  if (argc != 2) {</span><br><span class="line">    fprintf(stderr, "usage: cntchar file\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  if ((fp = fopen(argv[1], "r")) == NULL) {</span><br><span class="line">    fprintf(stderr, "Can't open %s\n", argv[1]);</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  while (getc(fp) != EOF)</span><br><span class="line">    count++;</span><br><span class="line"> </span><br><span class="line">  printf("There are %d characters in %s\n", count, argv[1]);</span><br><span class="line"> </span><br><span class="line">  fclose(fp);</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;ctype.h&gt;</span><br><span class="line">#include &lt;stdbool.h&gt;   /* C99 only */</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">{</span><br><span class="line">  FILE *fp;</span><br><span class="line">  int ch, count = 0;</span><br><span class="line">  bool in_word;</span><br><span class="line"> </span><br><span class="line">  if (argc != 2) {</span><br><span class="line">    fprintf(stderr, "usage: cntword file\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  if ((fp = fopen(argv[1], "r")) == NULL) {</span><br><span class="line">    fprintf(stderr, "Can't open %s\n", argv[1]);</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  in_word = false;</span><br><span class="line">  while ((ch = getc(fp)) != EOF)</span><br><span class="line">    if (isspace(ch))</span><br><span class="line">      in_word = false;</span><br><span class="line">    else if (!in_word) {</span><br><span class="line">      in_word = true;</span><br><span class="line">      count++;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">  printf("There are %d words in %s\n", count, argv[1]);</span><br><span class="line"> </span><br><span class="line">  fclose(fp);</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(c)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">{</span><br><span class="line">  FILE *fp;</span><br><span class="line">  int ch, count = 0;</span><br><span class="line"> </span><br><span class="line">  if (argc != 2) {</span><br><span class="line">    fprintf(stderr, "usage: cntline file\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  if ((fp = fopen(argv[1], "r")) == NULL) {</span><br><span class="line">    fprintf(stderr, "Can't open %s\n", argv[1]);</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  while((ch = getc(fp)) != EOF)</span><br><span class="line">    if (ch == '\n')</span><br><span class="line">      count++;</span><br><span class="line"> </span><br><span class="line">  printf("There are %d lines in %s\n", count, argv[1]);</span><br><span class="line"> </span><br><span class="line">  fclose(fp);</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #16; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;ctype.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">{</span><br><span class="line">  FILE *fp;</span><br><span class="line">  int i, n, offset;</span><br><span class="line">  unsigned char buffer[10];</span><br><span class="line"> </span><br><span class="line">  if (argc != 2) {</span><br><span class="line">    fprintf(stderr, "usage: viewfile file\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  if ((fp = fopen(argv[1], "rb")) == NULL) {</span><br><span class="line">    fprintf(stderr, "Can't open %s\n", argv[1]);</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  printf("Offset              Bytes              Characters\n");</span><br><span class="line">  printf("------  -----------------------------  ----------\n");</span><br><span class="line"> </span><br><span class="line">  for (offset = 0;; offset += 10) {</span><br><span class="line">    n = fread(buffer, 1, 10, fp);</span><br><span class="line">    if (n == 0)</span><br><span class="line">      break;</span><br><span class="line"> </span><br><span class="line">    printf("%6d  ", offset);</span><br><span class="line">    for (i = 0; i &lt; n; i++)</span><br><span class="line">      printf("%.2X ", buffer[i]);</span><br><span class="line">    for (; i &lt; 10; i++)</span><br><span class="line">      printf("   ");</span><br><span class="line">    printf(" ");</span><br><span class="line">    for (i = 0; i &lt; n; i++) {</span><br><span class="line">      if (!isprint(buffer[i]))</span><br><span class="line">        buffer[i] = '.';</span><br><span class="line">      printf("%c", buffer[i]);</span><br><span class="line">    }</span><br><span class="line">    printf("\n");</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  fclose(fp);</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>9.</strong> [was #20]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"> </span><br><span class="line">#define NAME_LEN 25</span><br><span class="line"> </span><br><span class="line">struct part {</span><br><span class="line">  int number;</span><br><span class="line">  char name[NAME_LEN + 1];</span><br><span class="line">  int on_hand;</span><br><span class="line">};</span><br><span class="line"> </span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">{</span><br><span class="line">  FILE *in_fp1, *in_fp2, *out_fp;</span><br><span class="line">  int num_read1, num_read2;</span><br><span class="line">  struct part part1, part2;</span><br><span class="line"> </span><br><span class="line">  if (argc != 4) {</span><br><span class="line">    fprintf(stderr, "usage: merge infile1 infile2 outfile\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  if ((in_fp1 = fopen(argv[1], "rb")) == NULL) {</span><br><span class="line">    fprintf(stderr, "Can't open %s\n", argv[1]);</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  if ((in_fp2 = fopen(argv[2], "rb")) == NULL) {</span><br><span class="line">    fprintf(stderr, "Can't open %s\n", argv[2]);</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  if ((out_fp = fopen(argv[3], "wb")) == NULL) {</span><br><span class="line">    fprintf(stderr, "Can't open %s\n", argv[3]);</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  num_read1 = fread(&amp;part1, sizeof(struct part), 1, in_fp1);</span><br><span class="line">  num_read2 = fread(&amp;part2, sizeof(struct part), 1, in_fp2);</span><br><span class="line">  while (num_read1 == 1 &amp;&amp; num_read2 == 1)</span><br><span class="line">    /* successfully read records from both files */</span><br><span class="line">    if (part1.number &lt; part2.number) {</span><br><span class="line">      fwrite(&amp;part1, sizeof(struct part), 1, out_fp);</span><br><span class="line">      num_read1 = fread(&amp;part1, sizeof(struct part), 1, in_fp1);</span><br><span class="line">    } else if (part1.number &gt; part2.number) {</span><br><span class="line">      fwrite(&amp;part2, sizeof(struct part), 1, out_fp);</span><br><span class="line">      num_read2 = fread(&amp;part2, sizeof(struct part), 1, in_fp2);</span><br><span class="line">    } else {</span><br><span class="line">      /* part numbers are equal */</span><br><span class="line">      if (strcmp(part1.name, part2.name) != 0)</span><br><span class="line">        fprintf(stderr,</span><br><span class="line">                "Names don't match for part %d; using the name %s\n",</span><br><span class="line">                part1.number, part1.name);</span><br><span class="line">      part1.on_hand += part2.on_hand;</span><br><span class="line">      fwrite(&amp;part1, sizeof(struct part), 1, out_fp);</span><br><span class="line">      num_read1 = fread(&amp;part1, sizeof(struct part), 1, in_fp1);</span><br><span class="line">      num_read2 = fread(&amp;part2, sizeof(struct part), 1, in_fp2);</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">  /* copy rest of file1 to output file */</span><br><span class="line">  while (num_read1 == 1) {</span><br><span class="line">    fwrite(&amp;part1, sizeof(struct part), 1, out_fp);</span><br><span class="line">    num_read1 = fread(&amp;part1, sizeof(struct part), 1, in_fp1);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  /* copy rest of file2 to output file */</span><br><span class="line">  while (num_read2 == 1) {</span><br><span class="line">    fwrite(&amp;part2, sizeof(struct part), 1, out_fp);</span><br><span class="line">    num_read2 = fread(&amp;part2, sizeof(struct part), 1, in_fp2);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  fclose(in_fp1);</span><br><span class="line">  fclose(in_fp2);</span><br><span class="line">  fclose(out_fp);</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-23"><a href="#Chapter-23" class="headerlink" title="Chapter 23"></a>Chapter 23</h3><h4 id="Answers-to-Selected-Exercises-18"><a href="#Answers-to-Selected-Exercises-18" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>1.</strong> [was #2; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">double round_nearest(double x, int n)</span><br><span class="line">{</span><br><span class="line">  double power = pow(10.0, n);</span><br><span class="line"> </span><br><span class="line">  if (x &lt; 0.0)</span><br><span class="line">    return ceil(x * power - 0.5) / power;</span><br><span class="line">  else</span><br><span class="line">    return floor(x * power + 0.5) / power;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #6]</p><p>(a) <code>memmove</code><br>(b) <code>memmove</code> (we can’t use <code>strcpy</code> because its behavior is undefined when the source of the copy overlaps with the destination)<br>(c) <code>strncpy</code><br>(d) <code>memcpy</code></p><p><strong>8.</strong> [was #8]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">int numchar(const char *s, char ch)</span><br><span class="line">{</span><br><span class="line">  int count = 0;</span><br><span class="line"> </span><br><span class="line">  s = strchr(s, ch);</span><br><span class="line">  while (s != NULL) {</span><br><span class="line">    count++;</span><br><span class="line">    s = strchr(s + 1, ch);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  return count;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>10.</strong> [was #10]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (strstr("foo#bar#baz", str) != NULL) …</span><br></pre></td></tr></tbody></table></figure><p>The assumptions are that <code>str</code> is at least three characters long and doesn’t contain the <code>#</code> character.</p><p><strong>11.</strong> [was #12] <code>memset(&amp;s[strlen(s)-n], '!', n);</code></p><h4 id="Answers-to-Selected-Programming-Projects-10"><a href="#Answers-to-Selected-Programming-Projects-10" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>2.</strong> [was #4; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;ctype.h&gt;</span><br><span class="line">#include &lt;stdbool.h&gt;   /* C99 only */</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  bool nonblank_seen = false;</span><br><span class="line">  int ch;</span><br><span class="line"> </span><br><span class="line">  while ((ch = getchar()) != EOF) {</span><br><span class="line">    if (nonblank_seen)</span><br><span class="line">      putchar(ch);</span><br><span class="line">    else if (!isspace(ch)) {</span><br><span class="line">      nonblank_seen = true;</span><br><span class="line">      putchar(ch);</span><br><span class="line">    }</span><br><span class="line">    if (ch == '\n')</span><br><span class="line">      nonblank_seen = false;</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-24"><a href="#Chapter-24" class="headerlink" title="Chapter 24"></a>Chapter 24</h3><h4 id="Answers-to-Selected-Exercises-19"><a href="#Answers-to-Selected-Exercises-19" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>4.</strong> [was #2]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">double try_math_fcn(double (*f)(double), double x, const char *msg)</span><br><span class="line">{</span><br><span class="line">  double result;</span><br><span class="line"> </span><br><span class="line">  errno = 0;</span><br><span class="line">  result = (*f)(x);</span><br><span class="line">  if (errno != 0) {</span><br><span class="line">    perror(msg);</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line">  return result;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define TRY_MATH_FCN(f,x) try_math_fcn(f, x, "Error in call of " #f)</span><br></pre></td></tr></tbody></table></figure><p><strong>5.</strong> [was #4]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  char code;</span><br><span class="line"> </span><br><span class="line">  for (;;) {</span><br><span class="line">    setjmp(env);</span><br><span class="line">    printf("Enter operation code: ");</span><br><span class="line">    scanf(" %c", &amp;code);</span><br><span class="line">    while (getchar() != '\n')   /* skips to end of line */</span><br><span class="line">      ;</span><br><span class="line">    switch (code) {</span><br><span class="line">      case 'i': insert();</span><br><span class="line">                break;</span><br><span class="line">      case 's': search();</span><br><span class="line">                break;</span><br><span class="line">      case 'u': update();</span><br><span class="line">                break;</span><br><span class="line">      case 'p': print();</span><br><span class="line">                break;</span><br><span class="line">      case 'q': return 0;</span><br><span class="line">      default:  printf("Illegal code\n");</span><br><span class="line">    }</span><br><span class="line">    printf("\n");</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>The <code>jmp_buf</code> variable <code>env</code> will need to be global, rather than local to <code>main</code>, so that the function performing the <code>longjmp</code> will be able to supply it as an argument.</p><h3 id="Chapter-25"><a href="#Chapter-25" class="headerlink" title="Chapter 25"></a>Chapter 25</h3><h4 id="Answers-to-Selected-Exercises-20"><a href="#Answers-to-Selected-Exercises-20" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>6.</strong> [was #4; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">while ((orig_char = getchar()) != EOF) ??&lt;</span><br><span class="line">  new_char = orig_char ??' KEY;</span><br><span class="line">  if (isprint(orig_char) &amp;&amp; isprint(new_char))</span><br><span class="line">    putchar(new_char);</span><br><span class="line">  else</span><br><span class="line">    putchar(orig_char);</span><br><span class="line">??&gt;</span><br></pre></td></tr></tbody></table></figure><h4 id="Answers-to-Selected-Programming-Projects-11"><a href="#Answers-to-Selected-Programming-Projects-11" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>1.</strong> [was #2]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;locale.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  char *temp, *C_locale;</span><br><span class="line"> </span><br><span class="line">  temp = setlocale(LC_ALL, NULL);</span><br><span class="line">    /* "C" is the current locale by default */</span><br><span class="line">  if (temp == NULL) {</span><br><span class="line">    printf("\"C\" locale information not available\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  C_locale = malloc(strlen(temp) + 1);</span><br><span class="line">  if (C_locale == NULL) {</span><br><span class="line">    printf("Can't allocate space to store locale information\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  strcpy(C_locale, temp);</span><br><span class="line"> </span><br><span class="line">  temp = setlocale(LC_ALL, "");</span><br><span class="line">  if (temp == NULL) {</span><br><span class="line">    printf("Native locale information not available\n");</span><br><span class="line">    exit(EXIT_FAILURE);</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  if (strcmp(temp, C_locale) == 0)</span><br><span class="line">    printf("Native locale is the same as the \"C\" locale\n");</span><br><span class="line">  else</span><br><span class="line">    printf("Native locale is not the same as the \"C\" locale\n");</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Chapter-26"><a href="#Chapter-26" class="headerlink" title="Chapter 26"></a>Chapter 26</h3><h4 id="Answers-to-Selected-Exercises-21"><a href="#Answers-to-Selected-Exercises-21" class="headerlink" title="Answers to Selected Exercises"></a>Answers to Selected Exercises</h4><p><strong>2.</strong> [was #2]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">void int_printf(const char *format, ...)</span><br><span class="line">{</span><br><span class="line">  va_list ap;</span><br><span class="line">  const char *p;</span><br><span class="line">  int digit, i, power, temp;</span><br><span class="line"> </span><br><span class="line">  va_start(ap, format);</span><br><span class="line"> </span><br><span class="line">  for (p = format; *p != '\0'; p++) {</span><br><span class="line">    if (*p != '%') {</span><br><span class="line">      putchar(*p);</span><br><span class="line">      continue;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    if (*++p == 'd') {</span><br><span class="line">      i = va_arg(ap, int);</span><br><span class="line">      if (i &lt; 0) {</span><br><span class="line">        i = -i;</span><br><span class="line">        putchar('-');</span><br><span class="line">      }</span><br><span class="line"> </span><br><span class="line">      temp = i;</span><br><span class="line">      power = 1;</span><br><span class="line">      while (temp &gt; 9) {</span><br><span class="line">        temp /= 10;</span><br><span class="line">        power *= 10;</span><br><span class="line">      }</span><br><span class="line"> </span><br><span class="line">      do {</span><br><span class="line">        digit = i / power;</span><br><span class="line">        putchar(digit + '0');</span><br><span class="line">        i -= digit * power;</span><br><span class="line">        power /= 10;</span><br><span class="line">      } while (i &gt; 0);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"> </span><br><span class="line">  va_end(ap);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>7.</strong> [was #4] The statement converts the string that <code>p</code> points to into a long integer, storing the result in <code>value</code>. <code>p</code> is left pointing to the first character not included in the conversion. The base used for the conversion is 10.</p><p><strong>9.</strong> [was #6]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">double rand_double(void)</span><br><span class="line">{</span><br><span class="line">  return (double) rand() / (RAND_MAX + 1);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="Answers-to-Selected-Programming-Projects-12"><a href="#Answers-to-Selected-Programming-Projects-12" class="headerlink" title="Answers to Selected Programming Projects"></a>Answers to Selected Programming Projects</h4><p><strong>1.</strong> [was #8]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int count = 1000;</span><br><span class="line"> </span><br><span class="line">  while (count-- &gt; 0)</span><br><span class="line">    printf("%d", rand() &amp; 1);</span><br><span class="line">  printf("\n");</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b) For generating numbers in the range 0 to <code>N</code> <code>-</code> <code>1</code>, the formula <code>rand()</code> <code>/</code> <code>(RAND_MAX</code> <code>/</code> <code>N</code> <code>+</code> <code>1)</code> often gives better results than <code>rand()</code> <code>%</code> <code>N</code>. For example, if <code>N</code> is 2 and <code>RAND_MAX</code> is 32767, the formula works out to <code>rand()</code> <code>/</code> 16384, which yields 0 if the return value of <code>rand</code> is less than 16384 and 1 if it’s greater than or equal to 16384.</p><p><strong>3.</strong> [was #10; modified]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line"> </span><br><span class="line">#define N 1000</span><br><span class="line"> </span><br><span class="line">int compare_ints(const void *p, const void *q);</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  int a[N], i;</span><br><span class="line">  clock_t start_clock;</span><br><span class="line"> </span><br><span class="line">  for (i = 0; i &lt; N; i++)</span><br><span class="line">    a[i] = N - i;</span><br><span class="line"> </span><br><span class="line">  start_clock = clock();</span><br><span class="line">  qsort(a, N, sizeof(a[0]), compare_ints);</span><br><span class="line"> </span><br><span class="line">  printf("Time used to sort %d integers: %g sec.\n", N,</span><br><span class="line">         (clock() - start_clock) / (double) CLOCKS_PER_SEC);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">int compare_ints(const void *p, const void *q)</span><br><span class="line">{</span><br><span class="line">  return *(int *)p - *(int *)q;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>4.</strong> [was #12]</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  struct tm t;</span><br><span class="line">  int n;</span><br><span class="line"> </span><br><span class="line">  /* initialize unused members */</span><br><span class="line">  t.tm_sec = t.tm_min = t.tm_hour = 0;</span><br><span class="line">  t.tm_isdst = -1;</span><br><span class="line"> </span><br><span class="line">  printf("Enter month (1-12): ");</span><br><span class="line">  scanf("%d", &amp;t.tm_mon);</span><br><span class="line">  t.tm_mon--;</span><br><span class="line"> </span><br><span class="line">  printf("Enter day (1-31): ");</span><br><span class="line">  scanf("%d", &amp;t.tm_mday);</span><br><span class="line"> </span><br><span class="line">  printf("Enter year: ");</span><br><span class="line">  scanf("%d", &amp;t.tm_year);</span><br><span class="line">  t.tm_year -= 1900;</span><br><span class="line"> </span><br><span class="line">  printf("Enter number of days in future: ");</span><br><span class="line">  scanf("%d", &amp;n);</span><br><span class="line"> </span><br><span class="line">  t.tm_mday += n;</span><br><span class="line">  mktime(&amp;t);</span><br><span class="line">  printf("\nFuture date: %d/%d/%d\n",</span><br><span class="line">         t.tm_mon + 1, t.tm_mday, t.tm_year + 1900);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>6.</strong> [was #14]</p><p>(a)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  time_t current = time(NULL);</span><br><span class="line">  struct tm *ptr;</span><br><span class="line">  char date_time[37];</span><br><span class="line"> </span><br><span class="line">  ptr = localtime(&amp;current);</span><br><span class="line">  strftime(date_time, sizeof(date_time), "%A, %B %d, %Y  %I:%M", ptr);</span><br><span class="line">  printf("%s%c\n", date_time, ptr-&gt;tm_hour &lt;= 11 ? 'a' : 'p');</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(b)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  time_t current = time(NULL);</span><br><span class="line">  char date_time[22];</span><br><span class="line"> </span><br><span class="line">  strftime(date_time, sizeof(date_time), "%a, %d %b %y  %H:%M",</span><br><span class="line">           localtime(&amp;current));</span><br><span class="line">  puts(date_time);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>(c)</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;time.h&gt;</span><br><span class="line"> </span><br><span class="line">int main(void)</span><br><span class="line">{</span><br><span class="line">  time_t current = time(NULL);</span><br><span class="line">  struct tm *ptr;</span><br><span class="line">  char date[9], time[12];</span><br><span class="line"> </span><br><span class="line">  ptr = localtime(&amp;current);</span><br><span class="line">  strftime(date, sizeof(date), "%m/%d/%y", ptr);</span><br><span class="line">  strftime(time, sizeof(time), "%I:%M:%S %p", ptr);</span><br><span class="line"> </span><br><span class="line">  /* print date and time, suppressing leading zero in hours */</span><br><span class="line">  printf("%s  %s\n", date, time[0] == '0' ? &amp;time[1] : time);</span><br><span class="line"> </span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://czqu.net">Paul Chen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://czqu.net/posts/28638/">https://czqu.net/posts/28638/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C/">C</a></div><div class="post-share"><div class="social-share" data-image="/img/Doraemon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media=&quot;all&quot;"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/posts/3587124311/" title="LeetCode 46. Permutations"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">LeetCode 46. Permutations</div></div><div class="info-2"><div class="info-item-1">Question:Given an array nums of distinct integers, return all the possible permutations. You can return the answer in any order. Example 1: 12Input: nums = [1,2,3]Output: [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]] Example 2: 12Input: nums = [0,1]Output: [[0,1],[1,0]] Example 3: 12Input: nums = [1]Output: [[1]] Constraints: 1 &lt;= nums.length &lt;= 6 -10 &lt;= nums[i] &lt;= 10 All the integers of nums are unique. Solution:Given an array of distinct integers nums, return all possib...</div></div></div></a></nav><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/Doraemon.png" onerror="this.onerror=null,this.src=&quot;/img/friend_404.gif&quot;" alt="avatar"></div><div class="author-info-name">Paul Chen</div><div class="author-info-description">Praising suffering because of incompetence.</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/czqu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/czqu" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-2"><span class="toc-number">1.</span> <span class="toc-text">Chapter 2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises"><span class="toc-number">1.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects"><span class="toc-number">1.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-6"><span class="toc-number">2.</span> <span class="toc-text">Chapter 6</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-1"><span class="toc-number">2.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-1"><span class="toc-number">2.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-7"><span class="toc-number">3.</span> <span class="toc-text">Chapter 7</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-2"><span class="toc-number">3.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-2"><span class="toc-number">3.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-8"><span class="toc-number">4.</span> <span class="toc-text">Chapter 8</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-3"><span class="toc-number">4.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-3"><span class="toc-number">4.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-9"><span class="toc-number">5.</span> <span class="toc-text">Chapter 9</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-4"><span class="toc-number">5.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-10"><span class="toc-number">6.</span> <span class="toc-text">Chapter 10</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-5"><span class="toc-number">6.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-4"><span class="toc-number">6.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-11"><span class="toc-number">7.</span> <span class="toc-text">Chapter 11</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-6"><span class="toc-number">7.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-12"><span class="toc-number">8.</span> <span class="toc-text">Chapter 12</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-7"><span class="toc-number">8.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-5"><span class="toc-number">8.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-13"><span class="toc-number">9.</span> <span class="toc-text">Chapter 13</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-8"><span class="toc-number">9.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-6"><span class="toc-number">9.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-14"><span class="toc-number">10.</span> <span class="toc-text">Chapter 14</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-9"><span class="toc-number">10.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-15"><span class="toc-number">11.</span> <span class="toc-text">Chapter 15</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-10"><span class="toc-number">11.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-16"><span class="toc-number">12.</span> <span class="toc-text">Chapter 16</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-11"><span class="toc-number">12.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-7"><span class="toc-number">12.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-17"><span class="toc-number">13.</span> <span class="toc-text">Chapter 17</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-12"><span class="toc-number">13.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-8"><span class="toc-number">13.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-18"><span class="toc-number">14.</span> <span class="toc-text">Chapter 18</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-13"><span class="toc-number">14.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-19"><span class="toc-number">15.</span> <span class="toc-text">Chapter 19</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-14"><span class="toc-number">15.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-20"><span class="toc-number">16.</span> <span class="toc-text">Chapter 20</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-15"><span class="toc-number">16.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-21"><span class="toc-number">17.</span> <span class="toc-text">Chapter 21</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-16"><span class="toc-number">17.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-22"><span class="toc-number">18.</span> <span class="toc-text">Chapter 22</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-17"><span class="toc-number">18.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-9"><span class="toc-number">18.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-23"><span class="toc-number">19.</span> <span class="toc-text">Chapter 23</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-18"><span class="toc-number">19.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-10"><span class="toc-number">19.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-24"><span class="toc-number">20.</span> <span class="toc-text">Chapter 24</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-19"><span class="toc-number">20.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-25"><span class="toc-number">21.</span> <span class="toc-text">Chapter 25</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-20"><span class="toc-number">21.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-11"><span class="toc-number">21.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chapter-26"><span class="toc-number">22.</span> <span class="toc-text">Chapter 26</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Exercises-21"><span class="toc-number">22.1.</span> <span class="toc-text">Answers to Selected Exercises</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Answers-to-Selected-Programming-Projects-12"><span class="toc-number">22.2.</span> <span class="toc-text">Answers to Selected Programming Projects</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/3776602279/" title="How to Install a Specific Version of Docker on CentOS">How to Install a Specific Version of Docker on CentOS</a><time datetime="2023-05-02T21:02:00.000Z" title="Created 2023-05-02 22:02:00">2023-05-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/735037507/" title="How to Get Log4j Log File Path in Java">How to Get Log4j Log File Path in Java</a><time datetime="2023-03-20T22:02:00.000Z" title="Created 2023-03-20 22:02:00">2023-03-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/2250085940/" title="How to Execute JavaScript Code and Functions in Java">How to Execute JavaScript Code and Functions in Java</a><time datetime="2023-03-16T12:38:00.000Z" title="Created 2023-03-16 12:38:00">2023-03-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/1037676127/" title="How to make braised pork trotters">How to make braised pork trotters</a><time datetime="2023-03-12T09:18:00.000Z" title="Created 2023-03-12 09:18:00">2023-03-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/1268933518/" title="How to Retrieve User Addresses in a Spring Boot Application">How to Retrieve User Addresses in a Spring Boot Application</a><time datetime="2023-03-04T12:14:00.000Z" title="Created 2023-03-04 12:14:00">2023-03-04</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">©&nbsp;2017 - 2025 By Paul Chen</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/instant.page/instantpage.js" type="module"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/pluginsSrc/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  const initGitalk = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyGitalk = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const gitalk = new Gitalk({
      clientID: '46f31da723dadc12aa91',
      clientSecret: 'b7b88f1ad1f1ae991b3712c102cdfa7b6bea39d2',
      repo: 'czqu.net',
      owner: 'czqu',
      admin: ['czqu'],
      updateCountCallback: commentCount,
      ...option,
      id: isShuoshuo ? path : (option && option.id) || '646a38505a6f31daa8ef9442da072446'
    })

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async(el, path) => {
    if (typeof Gitalk === 'function') initGitalk(el, path)
    else {
      await btf.getCSS('/pluginsSrc/gitalk/dist/gitalk.css')
      await btf.getScript('/pluginsSrc/gitalk/dist/gitalk.min.js')
      initGitalk(el, path)
    }
  }

  if (isShuoshuo) {
    'Gitalk' === 'Gitalk'
      ? window.shuoshuoComment = { loadComment: loadGitalk }
      : window.loadOtherComment = loadGitalk
    return
  }

  if ('Gitalk' === 'Gitalk' || !true) {
    if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><script src="/pluginsSrc/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> Loading Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body><script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script><script>window.addEventListener("load", function(){window.cookieconsent.initialise({"palette":{"popup":{"background":"#eb6c44","text":"#ffffff"},"button":{"background":"#f5d948"}},"theme":"classic","position":"top","static":true,"content":{"message":"This website uses cookies to ensure you get the best experience. By continuing to browse the site, you are agreeing to our use of cookies. Learn more in our ","dismiss":"Dismiss","link":"Privacy Policy.","href":"/posts/1"}})});</script></html>