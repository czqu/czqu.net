{"title":"Linux 下将校园网客户端锐捷制作成服务并开机启动","slug":"draft/Make-campus-network-client-Ruijie-into-a-service","date":"2020-11-13T04:53:23.000Z","updated":"2020-11-13T04:53:23.000Z","comments":true,"path":"api/articles/draft/Make-campus-network-client-Ruijie-into-a-service.json","excerpt":"1.下载锐捷，解压后给rjsupplicant.sh 添加可执行权限 2.创建一个 systemd 启动脚本并将其放在 /etc/systemd/system/ 目录中，内容如下 1234567891011121314151617# ruijie.service[Unit]Description=Run ruijieAfter=network.target[Service]ExecStart=/home/rjsupplicant/rjsupplicant.sh -u stuxxxx -p passwordxxxx -d 0 ExecStop=/home/rjsupplicant/rjsupplicant.sh -qExecReload=/home/rjsupplicant/rjsupplicant.sh -u stuxxxx -p passwordxxxx -d 0Restart=on-failureKillMode=control-group[Install]WantedBy=multi-user.target 3.运行以下命令启动服务 1234systemctl daemon-re","covers":["/cn/posts/37686/v2-e8d4b949456153fcbba15889f8cff220_r.jpg"],"content":"<p>1.下载锐捷，解压后给rjsupplicant.sh 添加可执行权限</p>\n<p>2.创建一个 systemd 启动脚本并将其放在 <code>/etc/systemd/system/</code> 目录中，内容如下</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ruijie.service</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Run ruijie</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">ExecStart=/home/rjsupplicant/rjsupplicant.sh  -u stuxxxx -p passwordxxxx -d 0 </span><br><span class=\"line\">ExecStop=/home/rjsupplicant/rjsupplicant.sh -q</span><br><span class=\"line\">ExecReload=/home/rjsupplicant/rjsupplicant.sh -u stuxxxx -p passwordxxxx -d 0</span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\">KillMode=control-group</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n\n<p>3.运行以下命令启动服务</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> ruijie.service</span><br><span class=\"line\">systemctl start  ruijie <span class=\"comment\">#启动锐捷</span></span><br><span class=\"line\">systemctl status ruijie <span class=\"comment\">#查看锐捷状态</span></span><br></pre></td></tr></tbody></table></figure>\n\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/37686/v2-e8d4b949456153fcbba15889f8cff220_r.jpg\" alt=\"img\"></p>\n<p>4.重启检查是否启动</p>\n<figure class=\"highlight text\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br><span class=\"line\">ps aux|grep rjsupplicant</span><br><span class=\"line\">ping www.baidu.com</span><br></pre></td></tr></tbody></table></figure>","more":"<p>1.下载锐捷，解压后给rjsupplicant.sh 添加可执行权限</p>\n<p>2.创建一个 systemd 启动脚本并将其放在 <code>/etc/systemd/system/</code> 目录中，内容如下</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># ruijie.service</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Run ruijie</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">ExecStart=/home/rjsupplicant/rjsupplicant.sh  -u stuxxxx -p passwordxxxx -d 0 </span><br><span class=\"line\">ExecStop=/home/rjsupplicant/rjsupplicant.sh -q</span><br><span class=\"line\">ExecReload=/home/rjsupplicant/rjsupplicant.sh -u stuxxxx -p passwordxxxx -d 0</span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\">KillMode=control-group</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>3.运行以下命令启动服务</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> ruijie.service</span><br><span class=\"line\">systemctl start  ruijie <span class=\"comment\">#启动锐捷</span></span><br><span class=\"line\">systemctl status ruijie <span class=\"comment\">#查看锐捷状态</span></span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/cn/posts/37686/v2-e8d4b949456153fcbba15889f8cff220_r.jpg\" alt=\"img\"></p>\n<p>4.重启检查是否启动</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br><span class=\"line\">ps aux|grep rjsupplicant</span><br><span class=\"line\">ping www.baidu.com</span><br></pre></td></tr></table></figure>","categories":[],"tags":[{"name":"Linux","path":"api/tags/Linux.json"},{"name":"运维","path":"api/tags/运维.json"}]}