{"title":"使用cmake-gui进行转换为Visual Studio  的sln工程文件&&glog在Windows下的使用","slug":"draft/使用cmake-gui进行转换为Visual-Studio","date":"2018-03-26T07:44:32.000Z","updated":"2018-03-26T07:44:32.000Z","comments":true,"path":"api/articles/draft/使用cmake-gui进行转换为Visual-Studio.json","excerpt":"1.首先将库git到本地https://github.com/google/glog2.使用cmake-gui进行转换为Visual Studio 的sln工程文件(如下图）（使用我转换好的也可以https://github.com/czqu/builds/tree/master/glogs 然后选择vs版本和CPU架构（如果之前编译错了，再进去可能不能进到这个界面，把输出目录删除即可）3.点击generate，即可完成。 4.如果出现如下错误，说明你缺少gflags库，编译方法和上面一样不再赘述https://github.com/gflags/gflags 123456Could not find a package configuration file provided by \"gflags\" (requested version 2.2.0) with any of the following names: gflagsConfig.cmake gflags-config.cmake 5.然后新建一个测试工程（debug库和release库不能混用，不同架构也不能），添加头文件","covers":["/cn/posts/49708/20200513181042328.png","/cn/posts/49708/20200513181714187.png"],"content":"<p>1.首先将库git到本地<br><a href=\"https://github.com/google/glog\">https://github.com/google/glog</a><br>2.使用cmake-gui进行转换为Visual Studio 的sln工程文件(如下图）<br>（使用我转换好的也可以<a href=\"https://github.com/czqu/builds/tree/master/glogs\">https://github.com/czqu/builds/tree/master/glogs</a></p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/49708/20200513181042328.png\" alt=\"在这里插入图片描述\"><br><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/49708/20200513181828378.png\" alt=\"在这里插入图片描述\"><br><strong>然后选择vs版本和CPU架构</strong>（如果之前编译错了，再进去可能不能进到这个界面，把输出目录删除即可）<br><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/49708/20200513181222563.png\" alt=\"在这里插入图片描述\"><br>3.点击generate，即可完成。</p>\n<p>4.如果出现如下错误，说明你缺少gflags库，编译方法和上面一样不再赘述<br><a href=\"https://github.com/gflags/gflags\">https://github.com/gflags/gflags</a></p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Could not find a package configuration file provided by <span class=\"string\">\"gflags\"</span> (requested</span><br><span class=\"line\">  version 2.2.0) with any of the following names:</span><br><span class=\"line\"></span><br><span class=\"line\">    gflagsConfig.cmake</span><br><span class=\"line\">    gflags-config.cmake</span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/49708/20200513181714187.png\" alt=\"在这里插入图片描述\"><br>5.然后新建一个测试工程（debug库和release库不能混用，不同架构也不能），添加头文件和库目录，记得需要在开头加上 GLOG_NO_ABBREVIATED_SEVERITIES和GOOGLE_GLOG_DLL_DECL，不然会报错</p>\n<figure class=\"highlight cpp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">pragma</span> once</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> GLOG_NO_ABBREVIATED_SEVERITIES</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> GOOGLE_GLOG_DLL_DECL</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;logging.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> google;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">ifdef</span> _DEBUG</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">pragma</span> comment(lib, <span class=\"string\">\"glogd.lib\"</span>)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">else</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">pragma</span> comment(lib, <span class=\"string\">\"glog.lib\"</span>)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endif</span> <span class=\"comment\">// DEBUG</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">testGlog2</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>{</span><br><span class=\"line\"><span class=\"type\">char</span> str[<span class=\"number\">20</span>] = <span class=\"string\">\"hello log!\"</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> i = <span class=\"number\">100000</span>;</span><br><span class=\"line\"><span class=\"keyword\">while</span> (i &gt; <span class=\"number\">0</span>) {</span><br><span class=\"line\">    <span class=\"comment\">//  LOG(INFO) &lt;&lt; str;</span></span><br><span class=\"line\">    <span class=\"built_in\">LOG</span>(INFO) &lt;&lt; <span class=\"string\">\"2info 2test\"</span> &lt;&lt; <span class=\"string\">\"2hello 2log!\"</span>;  <span class=\"comment\">//输出一个Info日志</span></span><br><span class=\"line\">    <span class=\"comment\">//  LOG(WARNING) &lt;&lt; \"warning test\";  //输出一个Warning日志</span></span><br><span class=\"line\">  <span class=\"comment\">//    LOG(ERROR) &lt;&lt; \"error test\";  //输出一个Error日志</span></span><br><span class=\"line\">    i--;</span><br><span class=\"line\">}</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">testGlog</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>{</span><br><span class=\"line\"><span class=\"comment\">// Start google log system:</span></span><br><span class=\"line\">FLAGS_log_dir = <span class=\"string\">\"E:\\\\logs\"</span>;</span><br><span class=\"line\">google::<span class=\"built_in\">InitGoogleLogging</span>(<span class=\"string\">\"loglog\"</span>);</span><br><span class=\"line\">google::<span class=\"built_in\">SetLogDestination</span>(google::GLOG_INFO, <span class=\"string\">\"E:\\\\logs\\\\INFO_\"</span>);</span><br><span class=\"line\">google::<span class=\"built_in\">SetStderrLogging</span>(google::GLOG_FATAL);</span><br><span class=\"line\">google::<span class=\"built_in\">SetLogFilenameExtension</span>(<span class=\"string\">\"log_\"</span>);</span><br><span class=\"line\">FLAGS_colorlogtostderr = <span class=\"literal\">true</span>;  <span class=\"comment\">// Set log color</span></span><br><span class=\"line\">FLAGS_logbufsecs = <span class=\"number\">0</span>;  <span class=\"comment\">// Set log output speed(s)</span></span><br><span class=\"line\">FLAGS_max_log_size = <span class=\"number\">1024</span>;  <span class=\"comment\">// Set max log file size</span></span><br><span class=\"line\">FLAGS_stop_logging_if_full_disk = <span class=\"literal\">true</span>;  <span class=\"comment\">// If disk is full</span></span><br><span class=\"line\">thread *t = <span class=\"keyword\">new</span> <span class=\"built_in\">thread</span>(testGlog2);</span><br><span class=\"line\"><span class=\"type\">char</span> str[<span class=\"number\">20</span>] = <span class=\"string\">\"hello log!\"</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> i = <span class=\"number\">100000</span>;</span><br><span class=\"line\"><span class=\"keyword\">while</span> (i &gt; <span class=\"number\">0</span>) {</span><br><span class=\"line\"><span class=\"comment\">//  LOG(INFO) &lt;&lt; str;</span></span><br><span class=\"line\">    <span class=\"built_in\">LOG</span>(INFO) &lt;&lt; <span class=\"string\">\"info test\"</span> &lt;&lt; <span class=\"string\">\"hello log!\"</span>;  <span class=\"comment\">//输出一个Info日志</span></span><br><span class=\"line\"><span class=\"comment\">//  LOG(WARNING) &lt;&lt; \"warning test\";  //输出一个Warning日志</span></span><br><span class=\"line\"><span class=\"comment\">//  LOG(ERROR) &lt;&lt; \"error test\";  //输出一个Error日志</span></span><br><span class=\"line\">    i--;</span><br><span class=\"line\">}</span><br><span class=\"line\">t-&gt;<span class=\"built_in\">join</span>();</span><br><span class=\"line\">google::<span class=\"built_in\">ShutdownGoogleLogging</span>();</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n\n","more":"<p>1.首先将库git到本地<br><a href=\"https://github.com/google/glog\">https://github.com/google/glog</a><br>2.使用cmake-gui进行转换为Visual Studio 的sln工程文件(如下图）<br>（使用我转换好的也可以<a href=\"https://github.com/czqu/builds/tree/master/glogs\">https://github.com/czqu/builds/tree/master/glogs</a></p>\n<p><img src=\"/cn/posts/49708/20200513181042328.png\" alt=\"在这里插入图片描述\"><br><img src=\"/cn/posts/49708/20200513181828378.png\" alt=\"在这里插入图片描述\"><br><strong>然后选择vs版本和CPU架构</strong>（如果之前编译错了，再进去可能不能进到这个界面，把输出目录删除即可）<br><img src=\"/cn/posts/49708/20200513181222563.png\" alt=\"在这里插入图片描述\"><br>3.点击generate，即可完成。</p>\n<p>4.如果出现如下错误，说明你缺少gflags库，编译方法和上面一样不再赘述<br><a href=\"https://github.com/gflags/gflags\">https://github.com/gflags/gflags</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Could not find a package configuration file provided by <span class=\"string\">&quot;gflags&quot;</span> (requested</span><br><span class=\"line\">  version 2.2.0) with any of the following names:</span><br><span class=\"line\"></span><br><span class=\"line\">    gflagsConfig.cmake</span><br><span class=\"line\">    gflags-config.cmake</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><img src=\"/cn/posts/49708/20200513181714187.png\" alt=\"在这里插入图片描述\"><br>5.然后新建一个测试工程（debug库和release库不能混用，不同架构也不能），添加头文件和库目录，记得需要在开头加上 GLOG_NO_ABBREVIATED_SEVERITIES和GOOGLE_GLOG_DLL_DECL，不然会报错</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">pragma</span> once</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> GLOG_NO_ABBREVIATED_SEVERITIES</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> GOOGLE_GLOG_DLL_DECL</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;logging.h&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> google;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">ifdef</span> _DEBUG</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">pragma</span> comment(lib, <span class=\"string\">&quot;glogd.lib&quot;</span>)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">else</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">pragma</span> comment(lib, <span class=\"string\">&quot;glog.lib&quot;</span>)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">endif</span> <span class=\"comment\">// DEBUG</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">testGlog2</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"type\">char</span> str[<span class=\"number\">20</span>] = <span class=\"string\">&quot;hello log!&quot;</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> i = <span class=\"number\">100000</span>;</span><br><span class=\"line\"><span class=\"keyword\">while</span> (i &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//  LOG(INFO) &lt;&lt; str;</span></span><br><span class=\"line\">    <span class=\"built_in\">LOG</span>(INFO) &lt;&lt; <span class=\"string\">&quot;2info 2test&quot;</span> &lt;&lt; <span class=\"string\">&quot;2hello 2log!&quot;</span>;  <span class=\"comment\">//输出一个Info日志</span></span><br><span class=\"line\">    <span class=\"comment\">//  LOG(WARNING) &lt;&lt; &quot;warning test&quot;;  //输出一个Warning日志</span></span><br><span class=\"line\">  <span class=\"comment\">//    LOG(ERROR) &lt;&lt; &quot;error test&quot;;  //输出一个Error日志</span></span><br><span class=\"line\">    i--;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">testGlog</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\"><span class=\"comment\">// Start google log system:</span></span><br><span class=\"line\">FLAGS_log_dir = <span class=\"string\">&quot;E:\\\\logs&quot;</span>;</span><br><span class=\"line\">google::<span class=\"built_in\">InitGoogleLogging</span>(<span class=\"string\">&quot;loglog&quot;</span>);</span><br><span class=\"line\">google::<span class=\"built_in\">SetLogDestination</span>(google::GLOG_INFO, <span class=\"string\">&quot;E:\\\\logs\\\\INFO_&quot;</span>);</span><br><span class=\"line\">google::<span class=\"built_in\">SetStderrLogging</span>(google::GLOG_FATAL);</span><br><span class=\"line\">google::<span class=\"built_in\">SetLogFilenameExtension</span>(<span class=\"string\">&quot;log_&quot;</span>);</span><br><span class=\"line\">FLAGS_colorlogtostderr = <span class=\"literal\">true</span>;  <span class=\"comment\">// Set log color</span></span><br><span class=\"line\">FLAGS_logbufsecs = <span class=\"number\">0</span>;  <span class=\"comment\">// Set log output speed(s)</span></span><br><span class=\"line\">FLAGS_max_log_size = <span class=\"number\">1024</span>;  <span class=\"comment\">// Set max log file size</span></span><br><span class=\"line\">FLAGS_stop_logging_if_full_disk = <span class=\"literal\">true</span>;  <span class=\"comment\">// If disk is full</span></span><br><span class=\"line\">thread *t = <span class=\"keyword\">new</span> <span class=\"built_in\">thread</span>(testGlog2);</span><br><span class=\"line\"><span class=\"type\">char</span> str[<span class=\"number\">20</span>] = <span class=\"string\">&quot;hello log!&quot;</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> i = <span class=\"number\">100000</span>;</span><br><span class=\"line\"><span class=\"keyword\">while</span> (i &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\"><span class=\"comment\">//  LOG(INFO) &lt;&lt; str;</span></span><br><span class=\"line\">    <span class=\"built_in\">LOG</span>(INFO) &lt;&lt; <span class=\"string\">&quot;info test&quot;</span> &lt;&lt; <span class=\"string\">&quot;hello log!&quot;</span>;  <span class=\"comment\">//输出一个Info日志</span></span><br><span class=\"line\"><span class=\"comment\">//  LOG(WARNING) &lt;&lt; &quot;warning test&quot;;  //输出一个Warning日志</span></span><br><span class=\"line\"><span class=\"comment\">//  LOG(ERROR) &lt;&lt; &quot;error test&quot;;  //输出一个Error日志</span></span><br><span class=\"line\">    i--;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">t-&gt;<span class=\"built_in\">join</span>();</span><br><span class=\"line\">google::<span class=\"built_in\">ShutdownGoogleLogging</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":[],"tags":[{"name":"Windows","path":"api/tags/Windows.json"},{"name":"cpp","path":"api/tags/cpp.json"}]}