{"title":"Rest Client在idea的使用","slug":"release/2020-7-26-using-rest-client-in-idea","date":"2020-08-06T01:13:10.000Z","updated":"2020-08-06T01:13:10.000Z","comments":true,"path":"api/articles/release/2020-7-26-using-rest-client-in-idea.json","excerpt":"1.安装首先，打开IntelliJ IDEA或pycharm，安装Rest Client。 File -&gt; Setting -&gt; Plug-ins -&gt; Browse Repository 搜索Rest Client，点击右侧的install，稍等片刻会提醒要重启IDEA，重启后安装结束。 2.使用使用时候，从顶层工具栏依次Tools -&gt; HTTP Client -&gt; Test RESTFUL Web Service 打开 之后，IDEA REST Client控制台的界面如下样子。 这个控制台展示的功能区有请求方式，请求参数和请求头的填充等等。 如果需要用户名、密码验证，点击右侧按钮，会弹出填充用户名和密码的窗口。 填完后会自动补充到Authorization 的header里面去。 Rest Client插件会自动将最近执行的50个请求保存到http-requests-log.http 文件中。 该文件存储在项目的.idea /httpRequests/目录下。 使用请求历史记录，用户可以快速导航到特定响应并再次发出请求。 除了构建请求，发起REST","covers":["/cn/posts/34566/dc6420f5bfcb4f0caaa4612c0a77f7da.jpeg","/cn/posts/34566/72bfdacadd0e4f18b6041bd1531f5246.jpeg","/cn/posts/34566/1ee7661ac0c948cdb46de50b7ee701fb.jpeg","/cn/posts/34566/e4cddce1ca634475b9c60c99d4949842.jpeg","/cn/posts/34566/87fe1df9a7594e0b9dedcaafe28cf4ba.jpeg","/cn/posts/34566/03f790e427ce4af3abcdc93bad4d8dea.jpeg","/cn/posts/34566/e6212321bc724d0bb5ad515363c23078.jpeg","/cn/posts/34566/47d61cd6209a4e2288fe86169fd955ab.jpeg","/cn/posts/34566/b1a3ea4dcf8b4ea6b02b908afbf51d88.jpeg","/cn/posts/34566/90287850460349e19903cd6c0a7adbaf.jpeg","/cn/posts/34566/ef48152bb3804fae962dcab4f3997776.jpeg","/cn/posts/34566/1c9196e4ae9a431b919a378bfe83c033.jpeg","/cn/posts/34566/897690e446b54dc189f6535d75a4d6a0.jpeg","/cn/posts/34566/3b1c4027409c45ea952eb75a63af7cdf.jpeg","/cn/posts/34566/27644624f1ef408180c601e688ce5d5e.jpeg","/cn/posts/34566/aada2feaeb294782999c37567e964b93.jpeg","/cn/posts/34566/e448aeed7a67447fa6f86a86fa2693aa.jpeg","/cn/posts/34566/d021b4e814d24d7aae0e1152a0a837d7.jpeg"],"content":"<h4 id=\"1-安装\"><a href=\"#1-安装\" class=\"headerlink\" title=\"1.安装\"></a>1.安装</h4><p><strong>首先，打开IntelliJ IDEA或pycharm，安装Rest Client。</strong></p>\n<p><strong>File -&gt; Setting -&gt; Plug-ins -&gt; Browse Repository</strong></p>\n<p>搜索Rest Client，点击右侧的install，稍等片刻会提醒要重启IDEA，重启后安装结束。</p>\n<h4 id=\"2-使用\"><a href=\"#2-使用\" class=\"headerlink\" title=\"2.使用\"></a>2.使用</h4><p>使用时候，从顶层工具栏依次Tools -&gt; HTTP Client -&gt; Test RESTFUL Web Service 打开</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/dc6420f5bfcb4f0caaa4612c0a77f7da.jpeg\"></p>\n<p><strong>之后，IDEA REST Client控制台的界面如下样子。</strong></p>\n<p>这个控制台展示的功能区有请求方式，请求参数和请求头的填充等等。</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/72bfdacadd0e4f18b6041bd1531f5246.jpeg\"></p>\n<p>如果需要用户名、密码验证，点击右侧按钮，会弹出填充用户名和密码的窗口。</p>\n<p>填完后会自动补充到Authorization 的header里面去。</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/1ee7661ac0c948cdb46de50b7ee701fb.jpeg\"></p>\n<p>Rest Client插件会自动将最近执行的50个请求保存到http-requests-log.http 文件中。</p>\n<p>该文件存储在项目的.idea /httpRequests/目录下。</p>\n<p>使用请求历史记录，用户可以快速导航到特定响应并再次发出请求。</p>\n<p><strong>除了构建请求，发起RESTful请求，Rest Client插件还可以完成如下postman不能做到的功能：</strong></p>\n<p>• 模板构建请求；</p>\n<p>• 多个环境区分；</p>\n<p>• 结果断言；</p>\n<p>• 结果暂存；</p>\n<h5 id=\"添加-token\"><a href=\"#添加-token\" class=\"headerlink\" title=\"添加 token\"></a>添加 token</h5><h4 id=\"3-pycharm中测试结果断言及生成测试报告\"><a href=\"#3-pycharm中测试结果断言及生成测试报告\" class=\"headerlink\" title=\"3.pycharm中测试结果断言及生成测试报告\"></a>3.pycharm中测试结果断言及生成测试报告</h4><p>先进入rest client插件界面，从顶层工具栏依次Tools -&gt; HTTP Client -&gt; Test RESTFUL Web Service 打开后， REST Client控制台的界面如下样式：</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/e4cddce1ca634475b9c60c99d4949842.jpeg\"></p>\n<p>点一下右上方的“Convert request to the new format”，接口请求各个参数自动生成一个配置文件，在IDE上边文件编辑框内。</p>\n<p>文件名为：rest-api.http，默认存放在.PyCharm2019.2configscratches。</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/87fe1df9a7594e0b9dedcaafe28cf4ba.jpeg\"></p>\n<h5 id=\"测试结果断言设置\"><a href=\"#测试结果断言设置\" class=\"headerlink\" title=\"测试结果断言设置\"></a>测试结果断言设置</h5><p>把上面生成的rest-api.http文件内容都删除，重新写入如下内容：</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/03f790e427ce4af3abcdc93bad4d8dea.jpeg\"></p>\n<blockquote>\n<p>解释：</p>\n<ol>\n<li><p>client.test，表示下面的是一个测试用例，第一个参数是测试用例名字，第二个参数是一个函数包含着测试断言。</p>\n</li>\n<li><p>断言由client.assert带出，第一个参数是判断条件，第二个参数是测试失败时候战士的信息。</p>\n</li>\n</ol>\n<p>鼠标移动到“GET”右侧的按钮，会出现“Run httpbin.org”（Run 后面的是测试接口的链接）</p>\n</blockquote>\n<p>点击弹出的标签，测试执行。Console界面自动展示出执行结果。</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/e6212321bc724d0bb5ad515363c23078.jpeg\"></p>\n<p>点击“Console”标签右侧的“test”标签，可以看到具体执行结果：</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/47d61cd6209a4e2288fe86169fd955ab.jpeg\"></p>\n<h5 id=\"自己写一个测试用例和断言\"><a href=\"#自己写一个测试用例和断言\" class=\"headerlink\" title=\"自己写一个测试用例和断言\"></a>自己写一个测试用例和断言</h5><p>仿照上面的例子，写一个测试用例和断言，判断response的headers里面的某一个字段。</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/b1a3ea4dcf8b4ea6b02b908afbf51d88.jpeg\"></p>\n<p>还是像上面那样执行测试用例。</p>\n<p>“console”标签没变化，但是右侧的“test”标签内容很不一样了。</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/90287850460349e19903cd6c0a7adbaf.jpeg\"></p>\n<p>两个测试用例都通过。</p>\n<h5 id=\"生成检测报告\"><a href=\"#生成检测报告\" class=\"headerlink\" title=\"生成检测报告\"></a>生成检测报告</h5><p>在“test”标签里，点击“Export Test Result”，可以将测试结果导出成测试报告</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/ef48152bb3804fae962dcab4f3997776.jpeg\"></p>\n<p>在弹出对话框中，保存测试报告到指定位置。</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/1c9196e4ae9a431b919a378bfe83c033.jpeg\"></p>\n<p>测试报告：</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/897690e446b54dc189f6535d75a4d6a0.jpeg\"></p>\n<h5 id=\"测试调试\"><a href=\"#测试调试\" class=\"headerlink\" title=\"测试调试\"></a>测试调试</h5><p>如果想调试测试用例、测试断言，或者想看中间结果，怎么办？</p>\n<p>可以用：client.log函数</p>\n<p>看一下修改后的例子：</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/3b1c4027409c45ea952eb75a63af7cdf.jpeg\"></p>\n<p>比如：想要看一下GET接口返回的headers信息，可以直接client.log(response.headers)打印结果。上下的两个client.log(“============”)没有实际意义，只是让结果看起来更容易找到。</p>\n<p>像上面提到的那样执行之后，结果在“test”标签页里可以看到：</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/27644624f1ef408180c601e688ce5d5e.jpeg\"></p>\n<p>执行多次后出现的 json 文件</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/aada2feaeb294782999c37567e964b93.jpeg\"></p>\n<p>点击右侧的蓝色反向双箭头，可以看到这些json链接的作用是为了让用户可以对比任意两次接口测试结果：</p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/e448aeed7a67447fa6f86a86fa2693aa.jpeg\"></p>\n<p><img src= \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" data-lazy-src=\"/cn/posts/34566/d021b4e814d24d7aae0e1152a0a837d7.jpeg\"></p>\n","more":"<h4 id=\"1-安装\"><a href=\"#1-安装\" class=\"headerlink\" title=\"1.安装\"></a>1.安装</h4><p><strong>首先，打开IntelliJ IDEA或pycharm，安装Rest Client。</strong></p>\n<p><strong>File -&gt; Setting -&gt; Plug-ins -&gt; Browse Repository</strong></p>\n<p>搜索Rest Client，点击右侧的install，稍等片刻会提醒要重启IDEA，重启后安装结束。</p>\n<h4 id=\"2-使用\"><a href=\"#2-使用\" class=\"headerlink\" title=\"2.使用\"></a>2.使用</h4><p>使用时候，从顶层工具栏依次Tools -&gt; HTTP Client -&gt; Test RESTFUL Web Service 打开</p>\n<p><img src=\"/cn/posts/34566/dc6420f5bfcb4f0caaa4612c0a77f7da.jpeg\"></p>\n<p><strong>之后，IDEA REST Client控制台的界面如下样子。</strong></p>\n<p>这个控制台展示的功能区有请求方式，请求参数和请求头的填充等等。</p>\n<p><img src=\"/cn/posts/34566/72bfdacadd0e4f18b6041bd1531f5246.jpeg\"></p>\n<p>如果需要用户名、密码验证，点击右侧按钮，会弹出填充用户名和密码的窗口。</p>\n<p>填完后会自动补充到Authorization 的header里面去。</p>\n<p><img src=\"/cn/posts/34566/1ee7661ac0c948cdb46de50b7ee701fb.jpeg\"></p>\n<p>Rest Client插件会自动将最近执行的50个请求保存到http-requests-log.http 文件中。</p>\n<p>该文件存储在项目的.idea /httpRequests/目录下。</p>\n<p>使用请求历史记录，用户可以快速导航到特定响应并再次发出请求。</p>\n<p><strong>除了构建请求，发起RESTful请求，Rest Client插件还可以完成如下postman不能做到的功能：</strong></p>\n<p>• 模板构建请求；</p>\n<p>• 多个环境区分；</p>\n<p>• 结果断言；</p>\n<p>• 结果暂存；</p>\n<h5 id=\"添加-token\"><a href=\"#添加-token\" class=\"headerlink\" title=\"添加 token\"></a>添加 token</h5><h4 id=\"3-pycharm中测试结果断言及生成测试报告\"><a href=\"#3-pycharm中测试结果断言及生成测试报告\" class=\"headerlink\" title=\"3.pycharm中测试结果断言及生成测试报告\"></a>3.pycharm中测试结果断言及生成测试报告</h4><p>先进入rest client插件界面，从顶层工具栏依次Tools -&gt; HTTP Client -&gt; Test RESTFUL Web Service 打开后， REST Client控制台的界面如下样式：</p>\n<p><img src=\"/cn/posts/34566/e4cddce1ca634475b9c60c99d4949842.jpeg\"></p>\n<p>点一下右上方的“Convert request to the new format”，接口请求各个参数自动生成一个配置文件，在IDE上边文件编辑框内。</p>\n<p>文件名为：rest-api.http，默认存放在.PyCharm2019.2configscratches。</p>\n<p><img src=\"/cn/posts/34566/87fe1df9a7594e0b9dedcaafe28cf4ba.jpeg\"></p>\n<h5 id=\"测试结果断言设置\"><a href=\"#测试结果断言设置\" class=\"headerlink\" title=\"测试结果断言设置\"></a>测试结果断言设置</h5><p>把上面生成的rest-api.http文件内容都删除，重新写入如下内容：</p>\n<p><img src=\"/cn/posts/34566/03f790e427ce4af3abcdc93bad4d8dea.jpeg\"></p>\n<blockquote>\n<p>解释：</p>\n<ol>\n<li><p>client.test，表示下面的是一个测试用例，第一个参数是测试用例名字，第二个参数是一个函数包含着测试断言。</p>\n</li>\n<li><p>断言由client.assert带出，第一个参数是判断条件，第二个参数是测试失败时候战士的信息。</p>\n</li>\n</ol>\n<p>鼠标移动到“GET”右侧的按钮，会出现“Run httpbin.org”（Run 后面的是测试接口的链接）</p>\n</blockquote>\n<p>点击弹出的标签，测试执行。Console界面自动展示出执行结果。</p>\n<p><img src=\"/cn/posts/34566/e6212321bc724d0bb5ad515363c23078.jpeg\"></p>\n<p>点击“Console”标签右侧的“test”标签，可以看到具体执行结果：</p>\n<p><img src=\"/cn/posts/34566/47d61cd6209a4e2288fe86169fd955ab.jpeg\"></p>\n<h5 id=\"自己写一个测试用例和断言\"><a href=\"#自己写一个测试用例和断言\" class=\"headerlink\" title=\"自己写一个测试用例和断言\"></a>自己写一个测试用例和断言</h5><p>仿照上面的例子，写一个测试用例和断言，判断response的headers里面的某一个字段。</p>\n<p><img src=\"/cn/posts/34566/b1a3ea4dcf8b4ea6b02b908afbf51d88.jpeg\"></p>\n<p>还是像上面那样执行测试用例。</p>\n<p>“console”标签没变化，但是右侧的“test”标签内容很不一样了。</p>\n<p><img src=\"/cn/posts/34566/90287850460349e19903cd6c0a7adbaf.jpeg\"></p>\n<p>两个测试用例都通过。</p>\n<h5 id=\"生成检测报告\"><a href=\"#生成检测报告\" class=\"headerlink\" title=\"生成检测报告\"></a>生成检测报告</h5><p>在“test”标签里，点击“Export Test Result”，可以将测试结果导出成测试报告</p>\n<p><img src=\"/cn/posts/34566/ef48152bb3804fae962dcab4f3997776.jpeg\"></p>\n<p>在弹出对话框中，保存测试报告到指定位置。</p>\n<p><img src=\"/cn/posts/34566/1c9196e4ae9a431b919a378bfe83c033.jpeg\"></p>\n<p>测试报告：</p>\n<p><img src=\"/cn/posts/34566/897690e446b54dc189f6535d75a4d6a0.jpeg\"></p>\n<h5 id=\"测试调试\"><a href=\"#测试调试\" class=\"headerlink\" title=\"测试调试\"></a>测试调试</h5><p>如果想调试测试用例、测试断言，或者想看中间结果，怎么办？</p>\n<p>可以用：client.log函数</p>\n<p>看一下修改后的例子：</p>\n<p><img src=\"/cn/posts/34566/3b1c4027409c45ea952eb75a63af7cdf.jpeg\"></p>\n<p>比如：想要看一下GET接口返回的headers信息，可以直接client.log(response.headers)打印结果。上下的两个client.log(“============”)没有实际意义，只是让结果看起来更容易找到。</p>\n<p>像上面提到的那样执行之后，结果在“test”标签页里可以看到：</p>\n<p><img src=\"/cn/posts/34566/27644624f1ef408180c601e688ce5d5e.jpeg\"></p>\n<p>执行多次后出现的 json 文件</p>\n<p><img src=\"/cn/posts/34566/aada2feaeb294782999c37567e964b93.jpeg\"></p>\n<p>点击右侧的蓝色反向双箭头，可以看到这些json链接的作用是为了让用户可以对比任意两次接口测试结果：</p>\n<p><img src=\"/cn/posts/34566/e448aeed7a67447fa6f86a86fa2693aa.jpeg\"></p>\n<p><img src=\"/cn/posts/34566/d021b4e814d24d7aae0e1152a0a837d7.jpeg\"></p>\n","categories":[],"tags":[{"name":"后端","path":"api/tags/后端.json"},{"name":"java","path":"api/tags/java.json"},{"name":"idea","path":"api/tags/idea.json"},{"name":"测试","path":"api/tags/测试.json"}]}